(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[1],{

/***/ "./ui/App.bs.js":
/*!**********************!*\
  !*** ./ui/App.bs.js ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Generated by BUCKLESCRIPT VERSION 5.0.4, PLEASE EDIT WITH CARE\n\n\nvar Css = __webpack_require__(/*! bs-css/src/Css.js */ \"./node_modules/bs-css/src/Css.js\");\nvar Web = __webpack_require__(/*! ./Web.bs.js */ \"./ui/Web.bs.js\");\nvar Lets = __webpack_require__(/*! ./Lets.bs.js */ \"./ui/Lets.bs.js\");\nvar Rust = __webpack_require__(/*! ./Rust.bs.js */ \"./ui/Rust.bs.js\");\nvar Curry = __webpack_require__(/*! bs-platform/lib/js/curry.js */ \"./node_modules/bs-platform/lib/js/curry.js\");\nvar Hooks = __webpack_require__(/*! ./Hooks.bs.js */ \"./ui/Hooks.bs.js\");\nvar React = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\nvar Colors = __webpack_require__(/*! ./Colors.bs.js */ \"./ui/Colors.bs.js\");\nvar Styles = __webpack_require__(/*! ./Styles.bs.js */ \"./ui/Styles.bs.js\");\nvar Objects = __webpack_require__(/*! ./Objects.bs.js */ \"./ui/Objects.bs.js\");\nvar Caml_obj = __webpack_require__(/*! bs-platform/lib/js/caml_obj.js */ \"./node_modules/bs-platform/lib/js/caml_obj.js\");\nvar ReactDOMRe = __webpack_require__(/*! reason-react/src/ReactDOMRe.js */ \"./node_modules/reason-react/src/ReactDOMRe.js\");\nvar Caml_format = __webpack_require__(/*! bs-platform/lib/js/caml_format.js */ \"./node_modules/bs-platform/lib/js/caml_format.js\");\nvar Caml_option = __webpack_require__(/*! bs-platform/lib/js/caml_option.js */ \"./node_modules/bs-platform/lib/js/caml_option.js\");\nvar ScenePicker = __webpack_require__(/*! ./ScenePicker.bs.js */ \"./ui/ScenePicker.bs.js\");\nvar Localforage = __webpack_require__(/*! localforage */ \"./node_modules/localforage/dist/localforage.js\");\nvar Belt_MapString = __webpack_require__(/*! bs-platform/lib/js/belt_MapString.js */ \"./node_modules/bs-platform/lib/js/belt_MapString.js\");\nvar ExposureControl = __webpack_require__(/*! ./ExposureControl.bs.js */ \"./ui/ExposureControl.bs.js\");\n\n((__webpack_require__(/*! rc-color-picker/assets/index.css */ \"./node_modules/rc-color-picker/assets/index.css\")));\n\nvar btn = Css.style(/* :: */[\n      Css.disabled(/* :: */[\n            Css.backgroundColor(Colors.accent),\n            /* [] */0\n          ]),\n      /* [] */0\n    ]);\n\nfunction App$ExposureFunction(Props) {\n  var config = Props.config;\n  var update = Props.update;\n  var wasm = Props.wasm;\n  return React.createElement(\"div\", {\n              className: Styles.column,\n              onMouseEnter: (function (param) {\n                  return wasm.show_hist();\n                }),\n              onMouseLeave: (function (param) {\n                  return wasm.hide_hist();\n                })\n            }, \"Exposure function: \", Styles.spacer(8), React.createElement(\"div\", {\n                  className: Styles.row\n                }, React.createElement(\"button\", {\n                      className: btn,\n                      disabled: config.rendering.exposure.curve === \"FourthRoot\",\n                      onClick: (function (_evt) {\n                          var transform = function (item, arg) {\n                            return Object.assign(Object.assign({ }, item), {\n                                        rendering: Object.assign(Object.assign({ }, item.rendering), {\n                                              exposure: Object.assign(Object.assign({ }, item.rendering.exposure), {\n                                                    curve: arg\n                                                  })\n                                            })\n                                      });\n                          };\n                          var config$1 = transform(config, \"FourthRoot\");\n                          return Curry._2(update, config$1, false);\n                        })\n                    }, \"Fourth Root\"), Styles.spacer(4), React.createElement(\"button\", {\n                      className: btn,\n                      disabled: config.rendering.exposure.curve === \"SquareRoot\",\n                      onClick: (function (_evt) {\n                          var transform = function (item, arg) {\n                            return Object.assign(Object.assign({ }, item), {\n                                        rendering: Object.assign(Object.assign({ }, item.rendering), {\n                                              exposure: Object.assign(Object.assign({ }, item.rendering.exposure), {\n                                                    curve: arg\n                                                  })\n                                            })\n                                      });\n                          };\n                          var config$1 = transform(config, \"SquareRoot\");\n                          return Curry._2(update, config$1, false);\n                        })\n                    }, \"Square Root\"), Styles.spacer(4), React.createElement(\"button\", {\n                      className: btn,\n                      disabled: config.rendering.exposure.curve === \"Linear\",\n                      onClick: (function (_evt) {\n                          var transform = function (item, arg) {\n                            return Object.assign(Object.assign({ }, item), {\n                                        rendering: Object.assign(Object.assign({ }, item.rendering), {\n                                              exposure: Object.assign(Object.assign({ }, item.rendering.exposure), {\n                                                    curve: arg\n                                                  })\n                                            })\n                                      });\n                          };\n                          var config$1 = transform(config, \"Linear\");\n                          return Curry._2(update, config$1, false);\n                        })\n                    }, \"Linear\")));\n}\n\nvar ExposureFunction = /* module */[\n  /* btn */btn,\n  /* make */App$ExposureFunction\n];\n\nfunction App$TransformEditor(Props) {\n  var config = Props.config;\n  var update = Props.update;\n  var wasm = Props.wasm;\n  return React.createElement(\"div\", {\n              className: Styles.join(/* :: */[\n                    Styles.control,\n                    /* :: */[\n                      Css.style(/* :: */[\n                            Css.display(/* flex */-1010954439),\n                            /* :: */[\n                              Css.flexDirection(/* column */-963948842),\n                              /* [] */0\n                            ]\n                          ]),\n                      /* [] */0\n                    ]\n                  ])\n            }, React.createElement(\"div\", {\n                  className: Styles.title\n                }, \"Scene transforms\"), React.createElement(\"div\", undefined, \"Rotational symmetry: \", React.createElement(\"input\", {\n                      max: \"30\",\n                      min: 0,\n                      type: \"number\",\n                      value: String(config.transform.rotational_symmetry),\n                      onChange: (function (evt) {\n                          var v = Caml_format.caml_int_of_string(evt.target.value);\n                          var transform = function (item, arg) {\n                            return Object.assign(Object.assign({ }, item), {\n                                        transform: Object.assign(Object.assign({ }, item.transform), {\n                                              rotational_symmetry: arg\n                                            })\n                                      });\n                          };\n                          var config$1 = transform(config, v);\n                          return Curry._2(update, config$1, false);\n                        })\n                    })), Styles.spacer(8), React.createElement(\"div\", undefined, React.createElement(\"input\", {\n                      checked: config.transform.reflection,\n                      type: \"checkbox\",\n                      onChange: (function (evt) {\n                          var checked = evt.target.checked;\n                          var transform = function (item, arg) {\n                            return Object.assign(Object.assign({ }, item), {\n                                        transform: Object.assign(Object.assign({ }, item.transform), {\n                                              reflection: arg\n                                            })\n                                      });\n                          };\n                          var config$1 = transform(config, checked);\n                          return Curry._2(update, config$1, false);\n                        })\n                    }), \" Reflect over y axis\"), Styles.spacer(8), React.createElement(\"div\", undefined, \"Center offset: \", React.createElement(\"input\", {\n                      className: Css.style(/* :: */[\n                            Css.width(Css.px(50)),\n                            /* [] */0\n                          ]),\n                      type: \"number\",\n                      value: config.rendering.center[0].toString(),\n                      onChange: (function (evt) {\n                          var x = Caml_format.caml_float_of_string(evt.target.value);\n                          var transform = function (item, arg) {\n                            return Object.assign(Object.assign({ }, item), {\n                                        rendering: Object.assign(Object.assign({ }, item.rendering), {\n                                              center: Curry._1(arg, item.rendering.center)\n                                            })\n                                      });\n                          };\n                          var config$1 = transform(config, (function (param) {\n                                  return /* tuple */[\n                                          x,\n                                          param[1]\n                                        ];\n                                }));\n                          return Curry._2(update, config$1, false);\n                        })\n                    }), React.createElement(\"input\", {\n                      className: Css.style(/* :: */[\n                            Css.width(Css.px(50)),\n                            /* [] */0\n                          ]),\n                      type: \"number\",\n                      value: config.rendering.center[1].toString(),\n                      onChange: (function (evt) {\n                          var y = Caml_format.caml_float_of_string(evt.target.value);\n                          var transform = function (item, arg) {\n                            return Object.assign(Object.assign({ }, item), {\n                                        rendering: Object.assign(Object.assign({ }, item.rendering), {\n                                              center: Curry._1(arg, item.rendering.center)\n                                            })\n                                      });\n                          };\n                          var config$1 = transform(config, (function (param) {\n                                  return /* tuple */[\n                                          param[0],\n                                          y\n                                        ];\n                                }));\n                          return Curry._2(update, config$1, false);\n                        })\n                    })), Styles.spacer(8), React.createElement(\"div\", undefined, \"Zoom: \", React.createElement(\"input\", {\n                      className: Css.style(/* :: */[\n                            Css.width(Css.px(50)),\n                            /* [] */0\n                          ]),\n                      type: \"number\",\n                      value: config.rendering.zoom.toString(),\n                      onChange: (function (evt) {\n                          var zoom = Caml_format.caml_float_of_string(evt.target.value);\n                          var transform = function (item, arg) {\n                            return Object.assign(Object.assign({ }, item), {\n                                        rendering: Object.assign(Object.assign({ }, item.rendering), {\n                                              zoom: arg\n                                            })\n                                      });\n                          };\n                          var config$1 = transform(config, zoom);\n                          return Curry._2(update, config$1, false);\n                        })\n                    })), Styles.spacer(8), React.createElement(App$ExposureFunction, {\n                  config: config,\n                  update: update,\n                  wasm: wasm\n                }));\n}\n\nvar TransformEditor = /* module */[/* make */App$TransformEditor];\n\nfunction genId(param) {\n  return Math.random().toString(36).slice(2);\n}\n\nfunction genId$1(param) {\n  return genId(/* () */0) + genId(/* () */0);\n}\n\nfunction newScene(scene) {\n  var id = genId$1(/* () */0);\n  var created = Date.now();\n  var fullId = created.toString() + (\":\" + id);\n  return /* record */[\n          /* id */fullId,\n          /* modified */created,\n          /* created */created,\n          /* title */scene[/* title */3],\n          /* tags */scene[/* tags */4],\n          /* children */scene[/* children */5],\n          /* parent */scene[/* parent */6]\n        ];\n}\n\nvar hashIt = (\nfunction(input) {\n    var hash = 0;\n    if (input.length == 0) {\n        return hash;\n    }\n    for (var i = 0; i < input.length; i++) {\n        var char = input.charCodeAt(i);\n        hash = ((hash<<5)-hash)+char;\n        hash = hash & hash; // Convert to 32bit integer\n    }\n    return hash;\n}\n);\n\nfunction anyHash(data) {\n  return Curry._1(hashIt, Lets.Opt[/* force */0](Caml_option.undefined_to_opt(JSON.stringify(data))));\n}\n\nfunction debounced(fn, time) {\n  var timer = /* record */[/* contents */undefined];\n  return (function (arg) {\n      var match = timer[0];\n      if (match !== undefined) {\n        clearTimeout(Caml_option.valFromOption(match));\n      }\n      timer[0] = Caml_option.some(setTimeout((function (param) {\n                  return Curry._1(fn, arg);\n                }), time));\n      return /* () */0;\n    });\n}\n\nfunction loadHash(hash, wasm, onLoad) {\n  if (hash.startsWith(\"#id=\")) {\n    var id = hash.slice(4);\n    return Curry._2(Lets.Async[/* Consume */2][/* let_ */0], Localforage.getItem(id), (function (config) {\n                  if (config == null) {\n                    return /* () */0;\n                  } else {\n                    return Curry._1(onLoad, /* tuple */[\n                                id,\n                                config\n                              ]);\n                  }\n                }));\n  } else if (hash.length > 1) {\n    var config = wasm.parse_url_config(hash.slice(1));\n    if (config == null) {\n      return /* () */0;\n    } else {\n      return Curry._1(onLoad, /* tuple */[\n                  undefined,\n                  config\n                ]);\n    }\n  } else {\n    return Curry._1(onLoad, /* tuple */[\n                undefined,\n                wasm.blank_config()\n              ]);\n  }\n}\n\nfunction updateId(set, id) {\n  var hash = \"id=\" + id;\n  Curry._1(set, hash);\n  return Web.$$Location[/* setHash */1](hash);\n}\n\nfunction permalink(set, hash) {\n  Curry._1(set, hash);\n  return Web.$$Location[/* setHash */1](hash);\n}\n\nfunction useRouter(wasm, onLoad) {\n  var prevHash = React.useRef(undefined);\n  var hash = Hooks.useHash(/* () */0);\n  React.useEffect((function () {\n          if (Caml_obj.caml_notequal(prevHash.current, hash)) {\n            prevHash.current = hash;\n            loadHash(hash, wasm, onLoad);\n          }\n          return undefined;\n        }), /* tuple */[\n        hash,\n        prevHash.current\n      ]);\n  return React.useCallback((function (newHash) {\n                prevHash.current = newHash;\n                return /* () */0;\n              }));\n}\n\nvar Router = /* module */[\n  /* loadHash */loadHash,\n  /* updateId */updateId,\n  /* permalink */permalink,\n  /* useRouter */useRouter\n];\n\nvar downloadFile = (\n(function(title, data) {\n  var a = document.createElement('a');\n  a.download = title + \".json\";\n  a.href = 'data:application/json,' + data;\n  document.body.appendChild(a);\n  a.click();\n  document.body.removeChild(a);\n})\n);\n\nCss.$$global(\"body\", /* :: */[\n      Css.backgroundColor(Colors.background),\n      /* :: */[\n        Css.color(Colors.text),\n        /* :: */[\n          Css.fontSize(Css.px(12)),\n          /* :: */[\n            Css.margin(Css.px(0)),\n            /* [] */0\n          ]\n        ]\n      ]\n    ]);\n\nCss.$$global(\"input\", /* :: */[\n      Css.backgroundColor(Colors.control),\n      /* :: */[\n        Css.color(Colors.text),\n        /* [] */0\n      ]\n    ]);\n\nCss.$$global(\"button\", /* :: */[\n      Css.backgroundColor(Colors.button),\n      /* :: */[\n        Css.cursor(/* pointer */-786317123),\n        /* :: */[\n          Css.color(Colors.text),\n          /* :: */[\n            Css.padding2(Css.px(4), Css.px(8)),\n            /* :: */[\n              Css.borderStyle(/* none */-922086728),\n              /* :: */[\n                Css.borderRadius(Css.px(4)),\n                /* :: */[\n                  Css.hover(/* :: */[\n                        Css.backgroundColor(Colors.buttonHover),\n                        /* [] */0\n                      ]),\n                  /* :: */[\n                    Css.disabled(/* :: */[\n                          Css.backgroundColor(/* transparent */582626130),\n                          /* :: */[\n                            Css.cursor(/* default */465819841),\n                            /* [] */0\n                          ]\n                        ]),\n                    /* [] */0\n                  ]\n                ]\n              ]\n            ]\n          ]\n        ]\n      ]\n    ]);\n\nfunction App$Inner(Props) {\n  var wasm = Props.wasm;\n  var directory = Props.directory;\n  var blank = Props.blank;\n  var router = /* record */[/* contents */(function (_ignored) {\n        return /* () */0;\n      })];\n  var match = React.useReducer((function (state, action) {\n          if (typeof action === \"number\") {\n            return /* record */[\n                    /* directory */state[/* directory */0],\n                    /* hoverUrl */undefined,\n                    /* current */state[/* current */2],\n                    /* config */state[/* config */3],\n                    /* ui */state[/* ui */4]\n                  ];\n          } else {\n            var variant = action[0];\n            if (variant !== 516394780) {\n              if (variant >= 999946793) {\n                if (variant >= 1049777564) {\n                  return /* record */[\n                          /* directory */state[/* directory */0],\n                          /* hoverUrl */action[1],\n                          /* current */state[/* current */2],\n                          /* config */state[/* config */3],\n                          /* ui */state[/* ui */4]\n                        ];\n                } else {\n                  var match = action[1];\n                  return /* record */[\n                          /* directory */state[/* directory */0],\n                          /* hoverUrl */state[/* hoverUrl */1],\n                          /* current */state[/* current */2],\n                          /* config */match[0],\n                          /* ui */match[1]\n                        ];\n                }\n              } else if (variant >= 925284189) {\n                var scene = action[1];\n                updateId(router[0], scene[/* id */0]);\n                var init = state[/* directory */0];\n                return /* record */[\n                        /* directory : record */[\n                          /* scenes */Belt_MapString.set(state[/* directory */0][/* scenes */0], scene[/* id */0], scene),\n                          /* tags */init[/* tags */1]\n                        ],\n                        /* hoverUrl */state[/* hoverUrl */1],\n                        /* current */scene[/* id */0],\n                        /* config */state[/* config */3],\n                        /* ui */state[/* ui */4]\n                      ];\n              } else {\n                var match$1 = action[1];\n                return /* record */[\n                        /* directory */state[/* directory */0],\n                        /* hoverUrl */state[/* hoverUrl */1],\n                        /* current */match$1[0],\n                        /* config */match$1[1],\n                        /* ui */state[/* ui */4]\n                      ];\n              }\n            } else {\n              var id = action[1];\n              updateId(router[0], id);\n              return /* record */[\n                      /* directory */state[/* directory */0],\n                      /* hoverUrl */state[/* hoverUrl */1],\n                      /* current */id,\n                      /* config */state[/* config */3],\n                      /* ui */state[/* ui */4]\n                    ];\n            }\n          }\n        }), /* record */[\n        /* directory */directory,\n        /* hoverUrl */undefined,\n        /* current */undefined,\n        /* config */blank,\n        /* ui */Rust.blankUi\n      ]);\n  var dispatch = match[1];\n  var state = match[0];\n  React.useEffect((function () {\n          var update = debounced((function (param) {\n                  return Curry._1(dispatch, /* `Update */[\n                              999946793,\n                              /* tuple */[\n                                param[0],\n                                param[1]\n                              ]\n                            ]);\n                }), 200);\n          wasm.setup(state[/* config */3], (function (config, ui) {\n                  return Curry._1(update, /* tuple */[\n                              config,\n                              ui\n                            ]);\n                }));\n          return undefined;\n        }), ([]));\n  router[0] = useRouter(wasm, (function (param) {\n          var config = wasm.restore(param[1]);\n          return Curry._1(dispatch, /* `Route */[\n                      9661801,\n                      /* tuple */[\n                        param[0],\n                        config\n                      ]\n                    ]);\n        }));\n  Hooks.useOnChange(undefined, state[/* directory */0], (function (directory) {\n          console.log(\"Directory changed -- saving\");\n          return Curry._2(Lets.Async[/* Consume */2][/* let_ */0], ScenePicker.saveSceneInfo(directory), (function (param) {\n                        return /* () */0;\n                      }));\n        }));\n  var onSaveScene = React.useCallback((function (scene) {\n          var match = scene[/* id */0] === \"\";\n          var scene$1 = match ? newScene(scene) : /* record */[\n              /* id */scene[/* id */0],\n              /* modified */Date.now(),\n              /* created */scene[/* created */2],\n              /* title */scene[/* title */3],\n              /* tags */scene[/* tags */4],\n              /* children */scene[/* children */5],\n              /* parent */scene[/* parent */6]\n            ];\n          var canvas = document.getElementById(\"drawing\");\n          canvas.toBlob((function (blob) {\n                  return Curry._2(Lets.Async[/* Consume */2][/* let_ */0], Localforage.setItem(scene$1[/* id */0] + \":image\", blob), (function (param) {\n                                return Curry._2(Lets.Async[/* Consume */2][/* let_ */0], Localforage.setItem(scene$1[/* id */0], state[/* config */3]), (function (param) {\n                                              Curry._1(dispatch, /* `Save */[\n                                                    925284189,\n                                                    scene$1\n                                                  ]);\n                                              return /* () */0;\n                                            }));\n                              }));\n                }));\n          return /* () */0;\n        }), /* array */[state[/* config */3]]);\n  var update = function (config, checkpoint) {\n    wasm.update(config, checkpoint);\n    return Curry._1(dispatch, /* `Update */[\n                999946793,\n                /* tuple */[\n                  config,\n                  state[/* ui */4]\n                ]\n              ]);\n  };\n  var match$1 = state[/* hoverUrl */1];\n  var match$2 = state[/* current */2];\n  var currentScene = match$2 !== undefined ? Belt_MapString.get(state[/* directory */0][/* scenes */0], match$2) : undefined;\n  var tmp = {\n    onSave: Curry.__1(onSaveScene),\n    onPermalink: (function (param) {\n        return permalink(router[0], wasm.serialize_url_config(state[/* config */3]));\n      }),\n    onDownload: (function (param) {\n        var data = JSON.stringify(state[/* config */3]);\n        if (data !== undefined) {\n          var title;\n          if (currentScene !== undefined) {\n            var match = currentScene;\n            var match$1 = match[/* title */3];\n            title = match$1 !== undefined ? match$1 : new Date(match[/* created */2]).toISOString();\n          } else {\n            title = new Date().toISOString();\n          }\n          return Curry._2(downloadFile, title, data);\n        } else {\n          return /* () */0;\n        }\n      }),\n    key: currentScene !== undefined ? currentScene[/* id */0] : \"new-scene\"\n  };\n  if (currentScene !== undefined) {\n    tmp.scene = Caml_option.valFromOption(currentScene);\n  }\n  return React.createElement(\"div\", {\n              className: Css.style(/* :: */[\n                    Css.display(/* flex */-1010954439),\n                    /* :: */[\n                      Css.flexDirection(/* row */5693978),\n                      /* :: */[\n                        Css.alignItems(/* stretch */-162316795),\n                        /* :: */[\n                          Css.maxWidth(Css.px(1300)),\n                          /* :: */[\n                            Css.margin2(/* zero */-789508312, /* auto */-1065951377),\n                            /* :: */[\n                              Css.height(/* `vh */[\n                                    26418,\n                                    100.0\n                                  ]),\n                              /* [] */0\n                            ]\n                          ]\n                        ]\n                      ]\n                    ]\n                  ])\n            }, React.createElement(\"div\", {\n                  className: Css.style(/* :: */[\n                        Css.position(/* relative */903134412),\n                        /* :: */[\n                          Css.display(/* flex */-1010954439),\n                          /* :: */[\n                            Css.flexDirection(/* column */-963948842),\n                            /* :: */[\n                              Css.alignItems(/* stretch */-162316795),\n                              /* [] */0\n                            ]\n                          ]\n                        ]\n                      ])\n                }, React.createElement(\"div\", {\n                      className: Css.style(/* :: */[\n                            Css.overflowX(/* auto */-1065951377),\n                            /* :: */[\n                              Css.flexShrink(0),\n                              /* :: */[\n                                Css.position(/* relative */903134412),\n                                /* [] */0\n                              ]\n                            ]\n                          ])\n                    }, React.createElement(\"canvas\", {\n                          className: Css.style(/* [] */0),\n                          id: \"drawing\",\n                          height: \"600\",\n                          width: \"600\"\n                        }), React.createElement(ExposureControl.make, {\n                          config: state[/* config */3],\n                          update: update,\n                          wasm: wasm\n                        }), match$1 !== undefined ? React.createElement(\"img\", {\n                            className: Css.style(/* :: */[\n                                  Css.backgroundColor(Css.black),\n                                  /* :: */[\n                                    Css.position(/* absolute */-1013592457),\n                                    /* :: */[\n                                      Css.top(Css.px(0)),\n                                      /* :: */[\n                                        Css.pointerEvents(/* none */-922086728),\n                                        /* :: */[\n                                          Css.left(Css.px(0)),\n                                          /* [] */0\n                                        ]\n                                      ]\n                                    ]\n                                  ]\n                                ]),\n                            src: match$1\n                          }) : null), React.createElement(ScenePicker.make, {\n                      directory: state[/* directory */0],\n                      current: state[/* current */2],\n                      onSelect: (function (id, config) {\n                          console.log(\"Resetting\", anyHash(config), config);\n                          wasm.restore(config);\n                          updateId(router[0], id);\n                          return Curry._1(dispatch, /* `Select */[\n                                      516394780,\n                                      id\n                                    ]);\n                        }),\n                      hover: (function (url) {\n                          return Curry._1(dispatch, /* `Hover */[\n                                      1049777564,\n                                      url\n                                    ]);\n                        }),\n                      unHover: (function (param) {\n                          return Curry._1(dispatch, /* Unhover */-179895133);\n                        })\n                    })), React.createElement(\"div\", {\n                  className: Css.style(/* :: */[\n                        Css.margin2(Css.px(8), Css.px(8)),\n                        /* :: */[\n                          Css.flex(1),\n                          /* :: */[\n                            Css.minHeight(Css.px(200)),\n                            /* [] */0\n                          ]\n                        ]\n                      ])\n                }, React.createElement(ScenePicker.SceneForm[/* make */0], tmp), React.createElement(App$TransformEditor, {\n                      config: state[/* config */3],\n                      update: (function (config, checkpoint) {\n                          wasm.update(config, checkpoint);\n                          return Curry._1(dispatch, /* `Update */[\n                                      999946793,\n                                      /* tuple */[\n                                        config,\n                                        state[/* ui */4]\n                                      ]\n                                    ]);\n                        }),\n                      wasm: wasm\n                    }), React.createElement(Objects.make, {\n                      ui: state[/* ui */4],\n                      config: state[/* config */3],\n                      update: (function (config, checkpoint) {\n                          wasm.update(config, checkpoint);\n                          return Curry._1(dispatch, /* `Update */[\n                                      999946793,\n                                      /* tuple */[\n                                        config,\n                                        state[/* ui */4]\n                                      ]\n                                    ]);\n                        }),\n                      updateUi: (function (ui) {\n                          wasm.update_ui(ui);\n                          return Curry._1(dispatch, /* `Update */[\n                                      999946793,\n                                      /* tuple */[\n                                        state[/* config */3],\n                                        ui\n                                      ]\n                                    ]);\n                        }),\n                      wasm: wasm\n                    })));\n}\n\nvar Inner = /* module */[/* make */App$Inner];\n\nfunction App$App(Props) {\n  var wasm = Props.wasm;\n  var keys = Hooks.useLoading(ScenePicker.getSceneInfo);\n  if (keys !== undefined) {\n    return React.createElement(App$Inner, {\n                wasm: wasm,\n                directory: keys,\n                blank: wasm.blank_config()\n              });\n  } else {\n    return React.createElement(\"div\", undefined, \"Loading\");\n  }\n}\n\nvar App = /* module */[/* make */App$App];\n\nRust.withModule((function (wasm) {\n        return ReactDOMRe.renderToElementWithId(React.createElement(App$App, {\n                        wasm: wasm\n                      }), \"reason-root\");\n      }));\n\nexports.ExposureFunction = ExposureFunction;\nexports.TransformEditor = TransformEditor;\nexports.genId = genId$1;\nexports.newScene = newScene;\nexports.hashIt = hashIt;\nexports.anyHash = anyHash;\nexports.debounced = debounced;\nexports.Router = Router;\nexports.downloadFile = downloadFile;\nexports.Inner = Inner;\nexports.App = App;\n/*  Not a pure module */\n\n\n//# sourceURL=webpack:///./ui/App.bs.js?");

/***/ }),

/***/ "./ui/Colors.bs.js":
/*!*************************!*\
  !*** ./ui/Colors.bs.js ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Generated by BUCKLESCRIPT VERSION 5.0.4, PLEASE EDIT WITH CARE\n\n\nvar Css = __webpack_require__(/*! bs-css/src/Css.js */ \"./node_modules/bs-css/src/Css.js\");\n\nvar text = Css.hex(\"125\");\n\nCss.hex(\"ccc\");\n\nvar control = Css.hex(\"f2f6ff\");\n\nvar accent = Css.hex(\"00adff\");\n\nvar button = Css.hex(\"d0eaf7\");\n\nvar buttonHover = Css.hex(\"a6d8f1\");\n\nvar background = Css.black;\n\nexports.background = background;\nexports.text = text;\nexports.control = control;\nexports.accent = accent;\nexports.button = button;\nexports.buttonHover = buttonHover;\n/* text Not a pure module */\n\n\n//# sourceURL=webpack:///./ui/Colors.bs.js?");

/***/ }),

/***/ "./ui/ExposureControl.bs.js":
/*!**********************************!*\
  !*** ./ui/ExposureControl.bs.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Generated by BUCKLESCRIPT VERSION 5.0.4, PLEASE EDIT WITH CARE\n\n\nvar Css = __webpack_require__(/*! bs-css/src/Css.js */ \"./node_modules/bs-css/src/Css.js\");\nvar Lets = __webpack_require__(/*! ./Lets.bs.js */ \"./ui/Lets.bs.js\");\nvar Curry = __webpack_require__(/*! bs-platform/lib/js/curry.js */ \"./node_modules/bs-platform/lib/js/curry.js\");\nvar Hooks = __webpack_require__(/*! ./Hooks.bs.js */ \"./ui/Hooks.bs.js\");\nvar React = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\nvar Caml_option = __webpack_require__(/*! bs-platform/lib/js/caml_option.js */ \"./node_modules/bs-platform/lib/js/caml_option.js\");\nvar RcColorPicker = __webpack_require__(/*! rc-color-picker */ \"./node_modules/rc-color-picker/lib/index.js\");\n\nfunction colorToRgb(color) {\n  var r = color.substr(1, 2);\n  var g = color.substr(3, 2);\n  var b = color.substr(5, 2);\n  return /* tuple */[\n          parseInt(r, 16),\n          parseInt(g, 16),\n          parseInt(b, 16)\n        ];\n}\n\nfunction toHex(n) {\n  var match = n < 16;\n  return (\n          match ? \"0\" : \"\"\n        ) + n.toString(16);\n}\n\nfunction rgbToColor(param) {\n  return \"#\" + (toHex(param[0] | 0) + (toHex(param[1] | 0) + toHex(param[2] | 0)));\n}\n\nvar Colorpickr = /* module */[];\n\nfunction evtPos(evt) {\n  return /* tuple */[\n          evt.clientX,\n          evt.clientY\n        ];\n}\n\nfunction useDraggable(onMove) {\n  var match = Hooks.useState(undefined);\n  var setPressed = match[1];\n  var pressed = match[0];\n  var moveRef = React.useRef(onMove);\n  moveRef.current = onMove;\n  React.useEffect((function (param) {\n          if (pressed !== undefined) {\n            var onMove = moveRef.current;\n            var mousemove = function (evt) {\n              evt.preventDefault();\n              return Curry._1(onMove, evtPos(evt));\n            };\n            var mouseup = function (evt) {\n              evt.preventDefault();\n              console.log(\"Mouseup, remove\");\n              return Curry._1(setPressed, undefined);\n            };\n            window.addEventListener(\"mousemove\", mousemove, true);\n            window.addEventListener(\"mouseup\", mouseup, true);\n            return (function (param) {\n                      console.log(\"releasing\");\n                      window.removeEventListener(\"mousemove\", mousemove, true);\n                      window.removeEventListener(\"mouseup\", mouseup, true);\n                      return /* () */0;\n                    });\n          }\n          \n        }), /* tuple */[\n        pressed,\n        /* () */0,\n        /* () */0\n      ]);\n  return /* tuple */[\n          pressed,\n          (function (evt) {\n              evt.preventDefault();\n              var pos = evtPos(evt);\n              return Curry._1(setPressed, pos);\n            })\n        ];\n}\n\nvar handleStyle = Css.style(/* :: */[\n      Css.width(Css.px(10)),\n      /* :: */[\n        Css.height(Css.px(10)),\n        /* :: */[\n          Css.boxSizing(/* borderBox */9307263),\n          /* :: */[\n            Css.marginLeft(Css.px(-5)),\n            /* :: */[\n              Css.borderRadius(/* `percent */[\n                    -119887163,\n                    20.0\n                  ]),\n              /* :: */[\n                Css.cursor(/* grab */-999567412),\n                /* :: */[\n                  Css.backgroundColor(Css.hex(\"000\")),\n                  /* :: */[\n                    Css.border(Css.px(2), /* solid */12956715, Css.hex(\"fff\")),\n                    /* [] */0\n                  ]\n                ]\n              ]\n            ]\n          ]\n        ]\n      ]\n    ]);\n\nvar handleWrapperStyle = Css.style(/* :: */[\n      Css.position(/* absolute */-1013592457),\n      /* :: */[\n        Css.bottom(Css.px(0)),\n        /* [] */0\n      ]\n    ]);\n\nfunction ExposureControl(Props) {\n  var config = Props.config;\n  var update = Props.update;\n  var wasm = Props.wasm;\n  var containerRef = React.useRef(null);\n  var match = useDraggable((function (param) {\n          var y = param[1];\n          var x = param[0];\n          return Curry._2(Lets.Opt[/* Consume */1][/* let_ */0], Caml_option.nullable_to_opt(containerRef.current), (function (container) {\n                        var box = container.getBoundingClientRect();\n                        var x$1 = x - box.left;\n                        y - box.top;\n                        var xPercent = x$1 / box.width;\n                        var transform = function (item, arg) {\n                          return Object.assign(Object.assign({ }, item), {\n                                      rendering: Object.assign(Object.assign({ }, item.rendering), {\n                                            exposure: Object.assign(Object.assign({ }, item.rendering.exposure), {\n                                                  min: arg\n                                                })\n                                          })\n                                    });\n                        };\n                        var config$1 = transform(config, xPercent);\n                        return Curry._2(update, config$1, false);\n                      }));\n        }));\n  var match$1 = useDraggable((function (param) {\n          var y = param[1];\n          var x = param[0];\n          return Curry._2(Lets.Opt[/* Consume */1][/* let_ */0], Caml_option.nullable_to_opt(containerRef.current), (function (container) {\n                        var box = container.getBoundingClientRect();\n                        var x$1 = x - box.left;\n                        y - box.top;\n                        var xPercent = x$1 / box.width;\n                        var transform = function (item, arg) {\n                          return Object.assign(Object.assign({ }, item), {\n                                      rendering: Object.assign(Object.assign({ }, item.rendering), {\n                                            exposure: Object.assign(Object.assign({ }, item.rendering.exposure), {\n                                                  max: arg\n                                                })\n                                          })\n                                    });\n                        };\n                        var config$1 = transform(config, xPercent);\n                        return Curry._2(update, config$1, false);\n                      }));\n        }));\n  var match$2 = config.rendering.coloration.Rgb;\n  var match$3 = config.rendering.coloration.Rgb;\n  return React.createElement(\"div\", {\n              ref: containerRef,\n              className: Css.style(/* :: */[\n                    Css.position(/* absolute */-1013592457),\n                    /* :: */[\n                      Css.bottom(Css.px(0)),\n                      /* :: */[\n                        Css.left(Css.px(0)),\n                        /* :: */[\n                          Css.selector(\".color-picker-wrapper\", /* :: */[\n                                Css.visibility(/* hidden */-862584982),\n                                /* [] */0\n                              ]),\n                          /* :: */[\n                            Css.hover(/* :: */[\n                                  Css.selector(\".color-picker-wrapper\", /* :: */[\n                                        Css.visibility(/* visible */589592690),\n                                        /* [] */0\n                                      ]),\n                                  /* [] */0\n                                ]),\n                            /* [] */0\n                          ]\n                        ]\n                      ]\n                    ]\n                  ]),\n              style: {\n                height: \"40px\",\n                width: config.rendering.width.toString() + \"px\"\n              },\n              onMouseOut: (function (evt) {\n                  return wasm.hide_hist();\n                }),\n              onMouseOver: (function (evt) {\n                  return wasm.show_hist();\n                })\n            }, React.createElement(\"div\", {\n                  className: handleWrapperStyle,\n                  style: {\n                    left: (config.rendering.width * (\n                          0.0 > config.rendering.exposure.min ? 0.0 : config.rendering.exposure.min\n                        )).toString() + \"px\"\n                  }\n                }, match$2 !== undefined ? React.createElement(\"div\", {\n                        className: \"color-picker-wrapper\",\n                        style: {\n                          height: \"30px\",\n                          marginTop: \"2px\",\n                          marginLeft: \"-13px\",\n                          width: \"10px\"\n                        }\n                      }, React.createElement(RcColorPicker, {\n                            color: rgbToColor(Caml_option.valFromOption(match$2).background),\n                            onChange: (function (color) {\n                                console.log(\"Color\", color);\n                                var transform = function (item, arg) {\n                                  return Object.assign(Object.assign({ }, item), {\n                                              rendering: Object.assign(Object.assign({ }, item.rendering), {\n                                                    coloration: Object.assign(Object.assign({ }, item.rendering.coloration), {\n                                                          Rgb: Curry._1(arg, item.rendering.coloration.Rgb)\n                                                        })\n                                                  })\n                                            });\n                                };\n                                var config$1 = transform(config, (function (rgb) {\n                                        if (rgb !== undefined) {\n                                          var transform = function (item, arg) {\n                                            return Object.assign(Object.assign({ }, item), {\n                                                        background: arg\n                                                      });\n                                          };\n                                          return Caml_option.some(transform(Caml_option.valFromOption(rgb), colorToRgb(color.color)));\n                                        }\n                                        \n                                      }));\n                                return Curry._2(update, config$1, false);\n                              })\n                          })) : \"not rgb\", React.createElement(\"div\", {\n                      className: handleStyle,\n                      onMouseDown: match[1]\n                    })), React.createElement(\"div\", {\n                  className: handleWrapperStyle,\n                  style: {\n                    left: (config.rendering.width * (\n                          1.0 < config.rendering.exposure.max ? 1.0 : config.rendering.exposure.max\n                        )).toString() + \"px\"\n                  }\n                }, match$3 !== undefined ? React.createElement(\"div\", {\n                        className: \"color-picker-wrapper\",\n                        style: {\n                          height: \"30px\",\n                          marginTop: \"2px\",\n                          marginLeft: \"-13px\",\n                          width: \"10px\"\n                        }\n                      }, React.createElement(RcColorPicker, {\n                            color: rgbToColor(Caml_option.valFromOption(match$3).highlight),\n                            onChange: (function (color) {\n                                console.log(\"Color\", color);\n                                var transform = function (item, arg) {\n                                  return Object.assign(Object.assign({ }, item), {\n                                              rendering: Object.assign(Object.assign({ }, item.rendering), {\n                                                    coloration: Object.assign(Object.assign({ }, item.rendering.coloration), {\n                                                          Rgb: Curry._1(arg, item.rendering.coloration.Rgb)\n                                                        })\n                                                  })\n                                            });\n                                };\n                                var config$1 = transform(config, (function (rgb) {\n                                        if (rgb !== undefined) {\n                                          var transform = function (item, arg) {\n                                            return Object.assign(Object.assign({ }, item), {\n                                                        highlight: arg\n                                                      });\n                                          };\n                                          return Caml_option.some(transform(Caml_option.valFromOption(rgb), colorToRgb(color.color)));\n                                        }\n                                        \n                                      }));\n                                return Curry._2(update, config$1, false);\n                              })\n                          })) : \"not rgb\", React.createElement(\"div\", {\n                      className: handleStyle,\n                      onMouseDown: match$1[1]\n                    })));\n}\n\nvar make = ExposureControl;\n\nexports.colorToRgb = colorToRgb;\nexports.toHex = toHex;\nexports.rgbToColor = rgbToColor;\nexports.Colorpickr = Colorpickr;\nexports.evtPos = evtPos;\nexports.useDraggable = useDraggable;\nexports.handleStyle = handleStyle;\nexports.handleWrapperStyle = handleWrapperStyle;\nexports.make = make;\n/* handleStyle Not a pure module */\n\n\n//# sourceURL=webpack:///./ui/ExposureControl.bs.js?");

/***/ }),

/***/ "./ui/Hooks.bs.js":
/*!************************!*\
  !*** ./ui/Hooks.bs.js ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Generated by BUCKLESCRIPT VERSION 5.0.4, PLEASE EDIT WITH CARE\n\n\nvar Web = __webpack_require__(/*! ./Web.bs.js */ \"./ui/Web.bs.js\");\nvar Curry = __webpack_require__(/*! bs-platform/lib/js/curry.js */ \"./node_modules/bs-platform/lib/js/curry.js\");\nvar React = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\nvar Caml_obj = __webpack_require__(/*! bs-platform/lib/js/caml_obj.js */ \"./node_modules/bs-platform/lib/js/caml_obj.js\");\nvar Caml_option = __webpack_require__(/*! bs-platform/lib/js/caml_option.js */ \"./node_modules/bs-platform/lib/js/caml_option.js\");\n\nfunction useState(initial) {\n  return React.useReducer((function (param, action) {\n                return action;\n              }), initial);\n}\n\nfunction useStateGetter(getter) {\n  var partial_arg = Curry._1(getter, /* () */0);\n  React.useState((function () {\n          return Curry._1(partial_arg, /* () */0);\n        }));\n  return React.useRef(undefined);\n}\n\nfunction useHash(param) {\n  var initial = Web.$$Location[/* hash */0](/* () */0);\n  var match = React.useReducer((function (param, action) {\n          return action;\n        }), initial);\n  var setHash = match[1];\n  React.useEffect((function () {\n          return Web.$$Location[/* addHashListener */2](setHash);\n        }), ([]));\n  return match[0];\n}\n\nvar hashIt = (\nfunction(input) {\n    var hash = 0;\n    if (!input || input.length == 0) {\n        return hash;\n    }\n    for (var i = 0; i < input.length; i++) {\n        var char = input.charCodeAt(i);\n        hash = ((hash<<5)-hash)+char;\n        hash = hash & hash; // Convert to 32bit integer\n    }\n    return hash;\n}\n);\n\nfunction anyHash(data) {\n  return Curry._1(hashIt, JSON.stringify(data));\n}\n\nfunction useOnChange($staropt$star, value, onChange) {\n  var lastValue = React.useRef(value);\n  React.useEffect((function () {\n          if (Caml_obj.caml_notequal(lastValue.current, value)) {\n            lastValue.current = value;\n            Curry._1(onChange, value);\n          }\n          return undefined;\n        }), /* tuple */[\n        value,\n        lastValue.current\n      ]);\n  return lastValue;\n}\n\nfunction useUpdatingState(initial) {\n  var match = React.useReducer((function (param, action) {\n          return action;\n        }), initial);\n  var setState = match[1];\n  var current = match[0];\n  React.useEffect((function () {\n          if (initial !== current) {\n            Curry._1(setState, initial);\n          }\n          return undefined;\n        }), /* array */[initial]);\n  return /* tuple */[\n          current,\n          setState\n        ];\n}\n\nfunction useLoading(getter) {\n  var match = React.useReducer((function (param, action) {\n          return action;\n        }), undefined);\n  var setData = match[1];\n  var data = match[0];\n  React.useEffect((function () {\n          if (data !== undefined) {\n            Curry._1(setData, undefined);\n          }\n          Curry._1(getter, /* () */0).then((function (result) {\n                  Curry._1(setData, Caml_option.some(result));\n                  return Promise.resolve(/* () */0);\n                }));\n          return undefined;\n        }), /* array */[getter]);\n  return data;\n}\n\nexports.useState = useState;\nexports.useStateGetter = useStateGetter;\nexports.useHash = useHash;\nexports.hashIt = hashIt;\nexports.anyHash = anyHash;\nexports.useOnChange = useOnChange;\nexports.useUpdatingState = useUpdatingState;\nexports.useLoading = useLoading;\n/* hashIt Not a pure module */\n\n\n//# sourceURL=webpack:///./ui/Hooks.bs.js?");

/***/ }),

/***/ "./ui/Lets.bs.js":
/*!***********************!*\
  !*** ./ui/Lets.bs.js ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Generated by BUCKLESCRIPT VERSION 5.0.4, PLEASE EDIT WITH CARE\n\n\nvar Curry = __webpack_require__(/*! bs-platform/lib/js/curry.js */ \"./node_modules/bs-platform/lib/js/curry.js\");\nvar Pervasives = __webpack_require__(/*! bs-platform/lib/js/pervasives.js */ \"./node_modules/bs-platform/lib/js/pervasives.js\");\nvar Caml_option = __webpack_require__(/*! bs-platform/lib/js/caml_option.js */ \"./node_modules/bs-platform/lib/js/caml_option.js\");\n\nfunction let_(v, fn) {\n  return v.then(Curry.__1(fn));\n}\n\nfunction resolve(prim) {\n  return Promise.resolve(prim);\n}\n\nfunction let_$1(v, fn) {\n  v.then((function (v) {\n          Curry._1(fn, v);\n          return Promise.resolve(/* () */0);\n        }));\n  return /* () */0;\n}\n\nvar Consume = /* module */[/* let_ */let_$1];\n\nvar Async = /* module */[\n  /* let_ */let_,\n  /* resolve */resolve,\n  /* Consume */Consume\n];\n\nfunction force(m) {\n  if (m !== undefined) {\n    return Caml_option.valFromOption(m);\n  } else {\n    return Pervasives.failwith(\"unwrapping option\");\n  }\n}\n\nfunction let_$2(v, fn) {\n  if (v !== undefined) {\n    return Curry._1(fn, Caml_option.valFromOption(v));\n  } else {\n    return /* () */0;\n  }\n}\n\nvar Consume$1 = /* module */[/* let_ */let_$2];\n\nvar Opt = /* module */[\n  /* force */force,\n  /* Consume */Consume$1\n];\n\nexports.Async = Async;\nexports.Opt = Opt;\n/* No side effect */\n\n\n//# sourceURL=webpack:///./ui/Lets.bs.js?");

/***/ }),

/***/ "./ui/Objects.bs.js":
/*!**************************!*\
  !*** ./ui/Objects.bs.js ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Generated by BUCKLESCRIPT VERSION 5.0.4, PLEASE EDIT WITH CARE\n\n\nvar Css = __webpack_require__(/*! bs-css/src/Css.js */ \"./node_modules/bs-css/src/Css.js\");\nvar Curry = __webpack_require__(/*! bs-platform/lib/js/curry.js */ \"./node_modules/bs-platform/lib/js/curry.js\");\nvar React = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\nvar Colors = __webpack_require__(/*! ./Colors.bs.js */ \"./ui/Colors.bs.js\");\nvar Styles = __webpack_require__(/*! ./Styles.bs.js */ \"./ui/Styles.bs.js\");\nvar Belt_Array = __webpack_require__(/*! bs-platform/lib/js/belt_Array.js */ \"./node_modules/bs-platform/lib/js/belt_Array.js\");\nvar Caml_array = __webpack_require__(/*! bs-platform/lib/js/caml_array.js */ \"./node_modules/bs-platform/lib/js/caml_array.js\");\nvar Pervasives = __webpack_require__(/*! bs-platform/lib/js/pervasives.js */ \"./node_modules/bs-platform/lib/js/pervasives.js\");\n\nfunction Objects$NumInput(Props) {\n  var value = Props.value;\n  var min = Props.min;\n  var max = Props.max;\n  var step = Props.step;\n  var onChange = Props.onChange;\n  return React.createElement(\"input\", {\n              max: max.toString(),\n              min: min,\n              step: step,\n              type: \"number\",\n              value: value.toString(),\n              onChange: (function (evt) {\n                  return Curry._1(onChange, Number(evt.target.value));\n                })\n            });\n}\n\nvar NumInput = /* module */[/* make */Objects$NumInput];\n\nfunction Objects$LogSlider(Props) {\n  var value = Props.value;\n  var min = Props.min;\n  var max = Props.max;\n  var step = Props.step;\n  var onChange = Props.onChange;\n  return React.createElement(\"div\", {\n              className: Styles.row\n            }, React.createElement(\"input\", {\n                  max: max.toString(),\n                  min: min,\n                  step: step,\n                  type: \"range\",\n                  value: Math.pow(Math.E, value).toString(),\n                  onChange: (function (evt) {\n                      var v = Number(evt.target.value);\n                      return Curry._1(onChange, Math.log(v));\n                    })\n                }), Styles.spacer(8), React.createElement(\"input\", {\n                  className: Css.style(/* :: */[\n                        Css.fontSize(Css.px(8)),\n                        /* :: */[\n                          Css.width(Css.px(50)),\n                          /* [] */0\n                        ]\n                      ]),\n                  step: step,\n                  type: \"number\",\n                  value: value.toString(),\n                  onChange: (function (evt) {\n                      return Curry._1(onChange, Number(evt.target.value));\n                    })\n                }));\n}\n\nvar LogSlider = /* module */[/* make */Objects$LogSlider];\n\nfunction Objects$Slider(Props) {\n  var value = Props.value;\n  var min = Props.min;\n  var max = Props.max;\n  var step = Props.step;\n  var onChange = Props.onChange;\n  return React.createElement(\"div\", {\n              className: Styles.row\n            }, React.createElement(\"input\", {\n                  max: max.toString(),\n                  min: min,\n                  step: step,\n                  type: \"range\",\n                  value: value.toString(),\n                  onChange: (function (evt) {\n                      return Curry._1(onChange, Number(evt.target.value));\n                    })\n                }), Styles.spacer(8), React.createElement(\"input\", {\n                  className: Css.style(/* :: */[\n                        Css.fontSize(Css.px(8)),\n                        /* :: */[\n                          Css.width(Css.px(50)),\n                          /* [] */0\n                        ]\n                      ]),\n                  step: step,\n                  type: \"number\",\n                  value: value.toString(),\n                  onChange: (function (evt) {\n                      return Curry._1(onChange, Number(evt.target.value));\n                    })\n                }));\n}\n\nvar Slider = /* module */[/* make */Objects$Slider];\n\nfunction Objects$LightEditor(Props) {\n  var wasm = Props.wasm;\n  var selected = Props.selected;\n  var light = Props.light;\n  var index = Props.index;\n  var onChange = Props.onChange;\n  var tmp;\n  if (selected) {\n    var point = light.kind.Point;\n    tmp = React.createElement(\"div\", {\n          className: Styles.column\n        }, Styles.spacer(16), React.createElement(\"div\", undefined, \"Radius \", React.createElement(Objects$NumInput, {\n                  value: point.offset,\n                  min: 0,\n                  max: 500.0,\n                  step: 5.0,\n                  onChange: (function (offset) {\n                      var transform = function (item, arg) {\n                        return Object.assign(Object.assign({ }, item), {\n                                    kind: Object.assign(Object.assign({ }, item.kind), {\n                                          Point: Object.assign(Object.assign({ }, item.kind.Point), {\n                                                offset: arg\n                                              })\n                                        })\n                                  });\n                      };\n                      return Curry._1(onChange, transform(light, offset));\n                    })\n                })), Styles.spacer(8), React.createElement(\"div\", {\n              className: Styles.row\n            }, \"x \", Styles.spacer(4), React.createElement(Objects$NumInput, {\n                  value: point.origin[0],\n                  min: -500,\n                  max: 500.0,\n                  step: 5.0,\n                  onChange: (function (x) {\n                      var transform = function (item, arg) {\n                        return Object.assign(Object.assign({ }, item), {\n                                    kind: Object.assign(Object.assign({ }, item.kind), {\n                                          Point: Object.assign(Object.assign({ }, item.kind.Point), {\n                                                origin: Curry._1(arg, item.kind.Point.origin)\n                                              })\n                                        })\n                                  });\n                      };\n                      return Curry._1(onChange, transform(light, (function (param) {\n                                        return /* tuple */[\n                                                x,\n                                                param[1]\n                                              ];\n                                      })));\n                    })\n                }), Styles.spacer(8), \"y \", Styles.spacer(4), React.createElement(Objects$NumInput, {\n                  value: point.origin[1],\n                  min: -500,\n                  max: 500.0,\n                  step: 5.0,\n                  onChange: (function (y) {\n                      var transform = function (item, arg) {\n                        return Object.assign(Object.assign({ }, item), {\n                                    kind: Object.assign(Object.assign({ }, item.kind), {\n                                          Point: Object.assign(Object.assign({ }, item.kind.Point), {\n                                                origin: Curry._1(arg, item.kind.Point.origin)\n                                              })\n                                        })\n                                  });\n                      };\n                      return Curry._1(onChange, transform(light, (function (param) {\n                                        return /* tuple */[\n                                                param[0],\n                                                y\n                                              ];\n                                      })));\n                    })\n                })), Styles.spacer(8), React.createElement(\"div\", {\n              className: Styles.row\n            }, \"t0 \", Styles.spacer(4), React.createElement(Objects$NumInput, {\n                  value: point.t0,\n                  min: 0,\n                  max: Math.PI * 2.0,\n                  step: 0.1,\n                  onChange: (function (t0) {\n                      var transform = function (item, arg) {\n                        return Object.assign(Object.assign({ }, item), {\n                                    kind: Object.assign(Object.assign({ }, item.kind), {\n                                          Point: Object.assign(Object.assign({ }, item.kind.Point), {\n                                                t0: arg\n                                              })\n                                        })\n                                  });\n                      };\n                      return Curry._1(onChange, transform(light, t0));\n                    })\n                }), Styles.spacer(8), \"t1 \", Styles.spacer(4), React.createElement(Objects$NumInput, {\n                  value: point.t1,\n                  min: 0,\n                  max: Math.PI * 2.0,\n                  step: 0.1,\n                  onChange: (function (t1) {\n                      var transform = function (item, arg) {\n                        return Object.assign(Object.assign({ }, item), {\n                                    kind: Object.assign(Object.assign({ }, item.kind), {\n                                          Point: Object.assign(Object.assign({ }, item.kind.Point), {\n                                                t1: arg\n                                              })\n                                        })\n                                  });\n                      };\n                      return Curry._1(onChange, transform(light, t1));\n                    })\n                })));\n  } else {\n    tmp = null;\n  }\n  return React.createElement(\"div\", {\n              className: Css.style(Pervasives.$at(/* :: */[\n                        Css.padding(Css.px(8)),\n                        /* :: */[\n                          Css.cursor(/* pointer */-786317123),\n                          /* :: */[\n                            Css.hover(/* :: */[\n                                  Css.backgroundColor(Colors.buttonHover),\n                                  /* [] */0\n                                ]),\n                            /* :: */[\n                              Css.margin2(Css.px(8), Css.px(0)),\n                              /* [] */0\n                            ]\n                          ]\n                        ]\n                      ], selected ? /* :: */[\n                          Css.outline(Css.px(2), /* solid */12956715, Colors.accent),\n                          /* [] */0\n                        ] : /* [] */0)),\n              onClick: (function (evt) {\n                  wasm.set_active_light(index);\n                  return /* () */0;\n                }),\n              onMouseOver: (function (evt) {\n                  return /* () */0;\n                })\n            }, React.createElement(\"div\", {\n                  className: Css.style(/* :: */[\n                        Css.fontWeight(/* medium */-20425611),\n                        /* :: */[\n                          Css.fontSize(Css.px(12)),\n                          /* [] */0\n                        ]\n                      ])\n                }, \"Light #\" + String(index)), tmp);\n}\n\nvar LightEditor = /* module */[/* make */Objects$LightEditor];\n\nfunction Objects$WallEditor(Props) {\n  var wasm = Props.wasm;\n  var selected = Props.selected;\n  var wall = Props.wall;\n  var index = Props.index;\n  var onChange = Props.onChange;\n  var onRemove = Props.onRemove;\n  var match = wall.hide;\n  return React.createElement(\"div\", {\n              className: Css.style(Pervasives.$at(/* :: */[\n                        Css.cursor(/* pointer */-786317123),\n                        /* :: */[\n                          Css.padding2(Css.px(8), Css.px(8)),\n                          /* :: */[\n                            Css.borderBottom(Css.px(1), /* solid */12956715, Css.hex(\"ddd\")),\n                            /* :: */[\n                              Css.hover(/* :: */[\n                                    Css.backgroundColor(Colors.buttonHover),\n                                    /* [] */0\n                                  ]),\n                              /* [] */0\n                            ]\n                          ]\n                        ]\n                      ], selected ? /* :: */[\n                          Css.outline(Css.px(2), /* solid */12956715, Colors.accent),\n                          /* :: */[\n                            Css.hover(/* :: */[\n                                  Css.outline(Css.px(2), /* solid */12956715, Colors.accent),\n                                  /* [] */0\n                                ]),\n                            /* [] */0\n                          ]\n                        ] : /* [] */0)),\n              onClick: (function (evt) {\n                  return wasm.set_active_wall(index);\n                }),\n              onMouseOver: (function (evt) {\n                  return wasm.hover_wall(index);\n                })\n            }, React.createElement(\"div\", {\n                  className: Css.style(/* :: */[\n                        Css.display(/* flex */-1010954439),\n                        /* :: */[\n                          Css.justifyContent(/* spaceBetween */516682146),\n                          /* :: */[\n                            Css.alignItems(/* center */98248149),\n                            /* [] */0\n                          ]\n                        ]\n                      ])\n                }, React.createElement(\"div\", {\n                      className: Css.style(/* :: */[\n                            Css.fontWeight(/* medium */-20425611),\n                            /* :: */[\n                              Css.fontSize(Css.px(12)),\n                              /* [] */0\n                            ]\n                          ])\n                    }, \"Wall #\" + String(index)), React.createElement(\"button\", {\n                      onClick: (function (evt) {\n                          evt.stopPropagation();\n                          var transform = function (item, arg) {\n                            return Object.assign(Object.assign({ }, item), {\n                                        hide: arg\n                                      });\n                          };\n                          return Curry._1(onChange, transform(wall, !wall.hide));\n                        })\n                    }, match ? \"Show\" : \"Hide\")), selected ? React.createElement(\"div\", {\n                    className: Styles.column\n                  }, Styles.spacer(8), React.createElement(\"div\", undefined, \"Absorb\", React.createElement(Objects$Slider, {\n                            value: wall.properties.absorb,\n                            min: 0,\n                            max: 1.0,\n                            step: 0.01,\n                            onChange: (function (absorb) {\n                                var transform = function (item, arg) {\n                                  return Object.assign(Object.assign({ }, item), {\n                                              properties: Object.assign(Object.assign({ }, item.properties), {\n                                                    absorb: arg\n                                                  })\n                                            });\n                                };\n                                return Curry._1(onChange, transform(wall, absorb));\n                              })\n                          })), Styles.spacer(8), React.createElement(\"div\", undefined, \"Reflect vs Refract\", React.createElement(Objects$Slider, {\n                            value: wall.properties.reflect,\n                            min: 0,\n                            max: 1.0,\n                            step: 0.01,\n                            onChange: (function (reflect) {\n                                var transform = function (item, arg) {\n                                  return Object.assign(Object.assign({ }, item), {\n                                              properties: Object.assign(Object.assign({ }, item.properties), {\n                                                    reflect: arg\n                                                  })\n                                            });\n                                };\n                                return Curry._1(onChange, transform(wall, reflect));\n                              })\n                          })), Styles.spacer(8), React.createElement(\"div\", undefined, \"Index of Refraction\", React.createElement(Objects$LogSlider, {\n                            value: wall.properties.refraction,\n                            min: 0,\n                            max: 5.0,\n                            step: 0.01,\n                            onChange: (function (value) {\n                                var transform = function (item, arg) {\n                                  return Object.assign(Object.assign({ }, item), {\n                                              properties: Object.assign(Object.assign({ }, item.properties), {\n                                                    refraction: arg\n                                                  })\n                                            });\n                                };\n                                return Curry._1(onChange, transform(wall, value));\n                              })\n                          })), Styles.spacer(8), React.createElement(\"div\", undefined, \"Roughness\", React.createElement(Objects$Slider, {\n                            value: wall.properties.roughness,\n                            min: 0,\n                            max: 1.0,\n                            step: 0.01,\n                            onChange: (function (value) {\n                                var transform = function (item, arg) {\n                                  return Object.assign(Object.assign({ }, item), {\n                                              properties: Object.assign(Object.assign({ }, item.properties), {\n                                                    roughness: arg\n                                                  })\n                                            });\n                                };\n                                return Curry._1(onChange, transform(wall, value));\n                              })\n                          })), Styles.spacer(8), React.createElement(\"button\", {\n                        onClick: (function (evt) {\n                            return Curry._1(onRemove, /* () */0);\n                          })\n                      }, \"Delete\")) : null);\n}\n\nvar WallEditor = /* module */[/* make */Objects$WallEditor];\n\nfunction Objects(Props) {\n  var ui = Props.ui;\n  var config = Props.config;\n  var update = Props.update;\n  var updateUi = Props.updateUi;\n  var wasm = Props.wasm;\n  return React.createElement(\"div\", {\n              className: Styles.control,\n              onMouseOut: (function (evt) {\n                  return wasm.hide_ui();\n                }),\n              onMouseOver: (function (evt) {\n                  return wasm.show_ui();\n                })\n            }, React.createElement(\"div\", {\n                  className: Styles.title\n                }, \"Scene objects\"), React.createElement(\"div\", undefined, Belt_Array.mapWithIndex(config.lights, (function (i, light) {\n                        var match = ui.selection;\n                        var tmp;\n                        if (match !== null) {\n                          var match$1 = match.Light;\n                          tmp = match$1 !== undefined ? i === match$1[0] : false;\n                        } else {\n                          tmp = false;\n                        }\n                        return React.createElement(Objects$LightEditor, {\n                                    wasm: wasm,\n                                    selected: tmp,\n                                    light: light,\n                                    index: i,\n                                    onChange: (function (light) {\n                                        var transform = function (item, arg) {\n                                          return Object.assign(Object.assign({ }, item), {\n                                                      lights: Curry._1(arg, item.lights)\n                                                    });\n                                        };\n                                        var config$1 = transform(config, (function (lights) {\n                                                var lights$1 = lights.slice();\n                                                Caml_array.caml_array_set(lights$1, i, light);\n                                                return lights$1;\n                                              }));\n                                        return Curry._2(update, config$1, false);\n                                      }),\n                                    key: String(i)\n                                  });\n                      }))), React.createElement(\"div\", {\n                  className: Styles.row\n                }, React.createElement(\"button\", {\n                      onClick: (function (_evt) {\n                          var transform = function (item, arg) {\n                            return Object.assign(Object.assign({ }, item), {\n                                        selection: arg\n                                      });\n                          };\n                          return Curry._1(updateUi, transform(ui, {\n                                          Adding: \"Line\",\n                                          Multiple: undefined,\n                                          Light: undefined,\n                                          Wall: undefined\n                                        }));\n                        })\n                    }, \"Add line\"), Styles.spacer(4), React.createElement(\"button\", {\n                      onClick: (function (_evt) {\n                          var transform = function (item, arg) {\n                            return Object.assign(Object.assign({ }, item), {\n                                        selection: arg\n                                      });\n                          };\n                          return Curry._1(updateUi, transform(ui, {\n                                          Adding: \"Parabola\",\n                                          Multiple: undefined,\n                                          Light: undefined,\n                                          Wall: undefined\n                                        }));\n                        })\n                    }, \"Add parabola\"), Styles.spacer(4), React.createElement(\"button\", {\n                      onClick: (function (_evt) {\n                          var transform = function (item, arg) {\n                            return Object.assign(Object.assign({ }, item), {\n                                        selection: arg\n                                      });\n                          };\n                          return Curry._1(updateUi, transform(ui, {\n                                          Adding: \"Circle\",\n                                          Multiple: undefined,\n                                          Light: undefined,\n                                          Wall: undefined\n                                        }));\n                        })\n                    }, \"Add arc\")), React.createElement(\"div\", {\n                  className: Css.style(/* :: */[\n                        Css.fontWeight(/* bold */-1055161979),\n                        /* :: */[\n                          Css.padding(Css.px(8)),\n                          /* [] */0\n                        ]\n                      ])\n                }, \"Walls\"), React.createElement(\"div\", undefined, Belt_Array.mapWithIndex(config.walls, (function (i, wall) {\n                        var match = ui.selection;\n                        var tmp;\n                        if (match !== null) {\n                          var match$1 = match.Wall;\n                          tmp = match$1 !== undefined ? i === match$1[0] : false;\n                        } else {\n                          tmp = false;\n                        }\n                        return React.createElement(Objects$WallEditor, {\n                                    wasm: wasm,\n                                    selected: tmp,\n                                    wall: wall,\n                                    index: i,\n                                    onChange: (function (wall) {\n                                        var transform = function (item, arg) {\n                                          return Object.assign(Object.assign({ }, item), {\n                                                      walls: Curry._1(arg, item.walls)\n                                                    });\n                                        };\n                                        var config$1 = transform(config, (function (walls) {\n                                                var walls$1 = walls.slice();\n                                                Caml_array.caml_array_set(walls$1, i, wall);\n                                                return walls$1;\n                                              }));\n                                        return Curry._2(update, config$1, false);\n                                      }),\n                                    onRemove: (function (param) {\n                                        var transform = function (item, arg) {\n                                          return Object.assign(Object.assign({ }, item), {\n                                                      walls: Curry._1(arg, item.walls)\n                                                    });\n                                        };\n                                        var config$1 = transform(config, (function (walls) {\n                                                var walls$1 = walls.slice();\n                                                walls$1.splice(i, 1);\n                                                return walls$1;\n                                              }));\n                                        return Curry._2(update, config$1, true);\n                                      }),\n                                    key: String(i)\n                                  });\n                      }))));\n}\n\nvar make = Objects;\n\nexports.NumInput = NumInput;\nexports.LogSlider = LogSlider;\nexports.Slider = Slider;\nexports.LightEditor = LightEditor;\nexports.WallEditor = WallEditor;\nexports.make = make;\n/* Css Not a pure module */\n\n\n//# sourceURL=webpack:///./ui/Objects.bs.js?");

/***/ }),

/***/ "./ui/Rust.bs.js":
/*!***********************!*\
  !*** ./ui/Rust.bs.js ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Generated by BUCKLESCRIPT VERSION 5.0.4, PLEASE EDIT WITH CARE\n\n\nvar Curry = __webpack_require__(/*! bs-platform/lib/js/curry.js */ \"./node_modules/bs-platform/lib/js/curry.js\");\n\nvar blankUi = {\n  show_lasers: false,\n  selection: null,\n  mouse_over: false,\n  show_hist: false,\n  hovered: null,\n  last_mouse_pos: /* tuple */[\n    0.0,\n    0.0\n  ]\n};\n\nvar wasm = (Promise.all(/*! import() */[__webpack_require__.e(2), __webpack_require__.e(3)]).then(__webpack_require__.bind(null, /*! ../pkg/zenphoton */ \"./pkg/zenphoton.js\")));\n\nfunction withModule(fn) {\n  wasm.then((function (wasm) {\n          Curry._1(fn, wasm);\n          return Promise.resolve(/* () */0);\n        }));\n  return /* () */0;\n}\n\nexports.blankUi = blankUi;\nexports.wasm = wasm;\nexports.withModule = withModule;\n/* wasm Not a pure module */\n\n\n//# sourceURL=webpack:///./ui/Rust.bs.js?");

/***/ }),

/***/ "./ui/ScenePicker.bs.js":
/*!******************************!*\
  !*** ./ui/ScenePicker.bs.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Generated by BUCKLESCRIPT VERSION 5.0.4, PLEASE EDIT WITH CARE\n\n\nvar Css = __webpack_require__(/*! bs-css/src/Css.js */ \"./node_modules/bs-css/src/Css.js\");\nvar Lets = __webpack_require__(/*! ./Lets.bs.js */ \"./ui/Lets.bs.js\");\nvar Curry = __webpack_require__(/*! bs-platform/lib/js/curry.js */ \"./node_modules/bs-platform/lib/js/curry.js\");\nvar Hooks = __webpack_require__(/*! ./Hooks.bs.js */ \"./ui/Hooks.bs.js\");\nvar Types = __webpack_require__(/*! ./Types.bs.js */ \"./ui/Types.bs.js\");\nvar React = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\nvar Colors = __webpack_require__(/*! ./Colors.bs.js */ \"./ui/Colors.bs.js\");\nvar $$String = __webpack_require__(/*! bs-platform/lib/js/string.js */ \"./node_modules/bs-platform/lib/js/string.js\");\nvar Styles = __webpack_require__(/*! ./Styles.bs.js */ \"./ui/Styles.bs.js\");\nvar Caml_obj = __webpack_require__(/*! bs-platform/lib/js/caml_obj.js */ \"./node_modules/bs-platform/lib/js/caml_obj.js\");\nvar Belt_List = __webpack_require__(/*! bs-platform/lib/js/belt_List.js */ \"./node_modules/bs-platform/lib/js/belt_List.js\");\nvar TypeSerde = __webpack_require__(/*! ./TypeSerde.bs.js */ \"./ui/TypeSerde.bs.js\");\nvar Belt_Array = __webpack_require__(/*! bs-platform/lib/js/belt_Array.js */ \"./node_modules/bs-platform/lib/js/belt_Array.js\");\nvar Pervasives = __webpack_require__(/*! bs-platform/lib/js/pervasives.js */ \"./node_modules/bs-platform/lib/js/pervasives.js\");\nvar Caml_format = __webpack_require__(/*! bs-platform/lib/js/caml_format.js */ \"./node_modules/bs-platform/lib/js/caml_format.js\");\nvar Caml_option = __webpack_require__(/*! bs-platform/lib/js/caml_option.js */ \"./node_modules/bs-platform/lib/js/caml_option.js\");\nvar Localforage = __webpack_require__(/*! localforage */ \"./node_modules/localforage/dist/localforage.js\");\nvar Belt_MapString = __webpack_require__(/*! bs-platform/lib/js/belt_MapString.js */ \"./node_modules/bs-platform/lib/js/belt_MapString.js\");\nvar Belt_SetString = __webpack_require__(/*! bs-platform/lib/js/belt_SetString.js */ \"./node_modules/bs-platform/lib/js/belt_SetString.js\");\nvar Caml_primitive = __webpack_require__(/*! bs-platform/lib/js/caml_primitive.js */ \"./node_modules/bs-platform/lib/js/caml_primitive.js\");\n\nfunction sceneFromKey(key) {\n  var m = key.split(\":\");\n  var exit = 0;\n  if (m.length !== 3) {\n    exit = 1;\n  } else {\n    var created = m[0];\n    var id = m[1];\n    var match = m[2];\n    if (match === \"image\") {\n      return /* record */[\n              /* id */created + (\":\" + id),\n              /* modified */Caml_format.caml_float_of_string(created),\n              /* created */Caml_format.caml_float_of_string(created),\n              /* title */undefined,\n              /* tags */Belt_SetString.empty,\n              /* children : array */[],\n              /* parent */undefined\n            ];\n    } else {\n      exit = 1;\n    }\n  }\n  if (exit === 1) {\n    console.log(m);\n    return Pervasives.failwith(\"Bad key \" + key);\n  }\n  \n}\n\nfunction getSceneInfo(param) {\n  return Lets.Async[/* let_ */0](Localforage.getItem(\"scenes\"), (function (sceneRaw) {\n                if (sceneRaw == null) {\n                  return Lets.Async[/* let_ */0](Localforage.keys(), (function (keys) {\n                                return Lets.Async[/* resolve */1](/* record */[\n                                            /* scenes */Belt_MapString.fromArray(Belt_Array.map(Belt_Array.keep(keys, (function (m) {\n                                                            return m.endsWith(\":image\");\n                                                          })), (function (key) {\n                                                        var scene = sceneFromKey(key);\n                                                        return /* tuple */[\n                                                                scene[/* id */0],\n                                                                scene\n                                                              ];\n                                                      }))),\n                                            /* tags */Belt_MapString.empty\n                                          ]);\n                              }));\n                } else {\n                  var match = TypeSerde.deserializeDirectory(sceneRaw);\n                  if (match.tag) {\n                    return Pervasives.failwith(\"Invalid scene data: \" + $$String.concat(\" : \", match[0]));\n                  } else {\n                    return Lets.Async[/* resolve */1](match[0]);\n                  }\n                }\n              }));\n}\n\nfunction saveSceneInfo(directory) {\n  var json = TypeSerde.serializeDirectory(directory);\n  return Localforage.setItem(\"scenes\", json);\n}\n\nfunction ScenePicker$Scene(Props) {\n  var scene = Props.scene;\n  var selected = Props.selected;\n  var onSelect = Props.onSelect;\n  var hover = Props.hover;\n  var unHover = Props.unHover;\n  var key = scene[/* id */0] + \":image\";\n  var getter = React.useCallback((function (param) {\n          return Localforage.getItem(key);\n        }), /* tuple */[\n        key,\n        scene[/* modified */1]\n      ]);\n  var imageBlob = Hooks.useLoading(getter);\n  var url = React.useMemo((function () {\n          if (imageBlob !== undefined) {\n            var blob = Caml_option.valFromOption(imageBlob);\n            if (blob == null) {\n              return \"invalid\";\n            } else {\n              return URL.createObjectURL(blob);\n            }\n          }\n          \n        }), /* array */[imageBlob]);\n  if (url !== undefined) {\n    var url$1 = url;\n    var match = scene[/* children */5].length === 0;\n    return React.createElement(\"div\", {\n                className: Css.style(Pervasives.$at(/* :: */[\n                          Css.display(/* flex */-1010954439),\n                          /* :: */[\n                            Css.flexDirection(/* row */5693978),\n                            /* :: */[\n                              Css.padding(Css.px(4)),\n                              /* [] */0\n                            ]\n                          ]\n                        ], selected ? /* :: */[\n                            Css.backgroundColor(Css.hex(\"5af\")),\n                            /* [] */0\n                          ] : /* [] */0)),\n                onMouseOut: (function (_evt) {\n                    return Curry._1(unHover, /* () */0);\n                  }),\n                onMouseOver: (function (_evt) {\n                    return Curry._1(hover, url$1);\n                  })\n              }, React.createElement(\"div\", {\n                    className: Css.style(/* :: */[\n                          Css.width(Css.px(50)),\n                          /* :: */[\n                            Css.backgroundColor(Css.black),\n                            /* :: */[\n                              Css.height(Css.px(50)),\n                              /* :: */[\n                                Css.backgroundSize(/* cover */-899416265),\n                                /* :: */[\n                                  /* `declaration */[\n                                    -434952966,\n                                    /* tuple */[\n                                      \"background-position\",\n                                      \"center\"\n                                    ]\n                                  ],\n                                  /* [] */0\n                                ]\n                              ]\n                            ]\n                          ]\n                        ]),\n                    style: {\n                      backgroundImage: \"url(\" + (url$1 + \")\")\n                    },\n                    onClick: (function (_evt) {\n                        return Curry._2(Lets.Async[/* Consume */2][/* let_ */0], Localforage.getItem(scene[/* id */0]), (function (config) {\n                                      if (config == null) {\n                                        return /* () */0;\n                                      } else {\n                                        return Curry._2(onSelect, scene[/* id */0], config);\n                                      }\n                                    }));\n                      })\n                  }), match ? null : React.createElement(\"div\", undefined, Belt_Array.map(scene[/* children */5], (function (key) {\n                            return React.createElement(\"div\", undefined, key);\n                          }))));\n  } else {\n    return React.createElement(\"div\", undefined, \"Loading...\");\n  }\n}\n\nvar Scene = /* module */[/* make */ScenePicker$Scene];\n\nfunction ScenePicker$SceneForm(Props) {\n  var match = Props.scene;\n  var scene = match !== undefined ? match : Types.emptyScene;\n  var onSave = Props.onSave;\n  var onPermalink = Props.onPermalink;\n  var onDownload = Props.onDownload;\n  var match$1 = Hooks.useState(scene);\n  var update = match$1[1];\n  var scene$1 = match$1[0];\n  var match$2 = scene$1[/* id */0] === \"\";\n  var match$3 = scene$1[/* title */3];\n  var match$4 = scene$1[/* id */0] !== \"\";\n  var match$5 = scene$1[/* id */0] === \"\";\n  return React.createElement(\"div\", {\n              className: Styles.control + (\" \" + Css.style(/* :: */[\n                      Css.flexDirection(/* column */-963948842),\n                      /* :: */[\n                        Css.display(/* flex */-1010954439),\n                        /* :: */[\n                          Css.alignItems(/* stretch */-162316795),\n                          /* [] */0\n                        ]\n                      ]\n                    ]))\n            }, React.createElement(\"div\", {\n                  className: Styles.title\n                }, match$2 ? \"New scene\" : \"Scene created \" + new Date(scene$1[/* created */2]).toLocaleString()), React.createElement(\"input\", {\n                  className: Css.style(/* :: */[\n                        Css.alignSelf(/* stretch */-162316795),\n                        /* [] */0\n                      ]),\n                  placeholder: \"Title\",\n                  value: match$3 !== undefined ? match$3 : \"\",\n                  onChange: (function (evt) {\n                      var title = evt.target.value;\n                      var match = title === \"\";\n                      return Curry._1(update, /* record */[\n                                  /* id */scene$1[/* id */0],\n                                  /* modified */scene$1[/* modified */1],\n                                  /* created */scene$1[/* created */2],\n                                  /* title */match ? undefined : title,\n                                  /* tags */scene$1[/* tags */4],\n                                  /* children */scene$1[/* children */5],\n                                  /* parent */scene$1[/* parent */6]\n                                ]);\n                    })\n                }), Styles.spacer(8), React.createElement(\"div\", {\n                  className: Styles.row\n                }, match$4 ? React.createElement(\"button\", {\n                        onClick: (function (_evt) {\n                            return Curry._1(onSave, scene$1);\n                          })\n                      }, \"Update scene\") : null, Styles.spacer(4), React.createElement(\"button\", {\n                      onClick: (function (_evt) {\n                          return Curry._1(onSave, /* record */[\n                                      /* id */\"\",\n                                      /* modified */scene$1[/* modified */1],\n                                      /* created */scene$1[/* created */2],\n                                      /* title */scene$1[/* title */3],\n                                      /* tags */scene$1[/* tags */4],\n                                      /* children */scene$1[/* children */5],\n                                      /* parent */scene$1[/* parent */6]\n                                    ]);\n                        })\n                    }, match$5 ? \"Save scene\" : \"Save new scene\")), Styles.spacer(4), React.createElement(\"div\", undefined, React.createElement(\"button\", {\n                      className: Styles.flatButton(Colors.text),\n                      onClick: (function (param) {\n                          return Curry._1(onPermalink, /* () */0);\n                        })\n                    }, \"Permalink\"), React.createElement(\"button\", {\n                      className: Styles.flatButton(Colors.text),\n                      onClick: (function (param) {\n                          return Curry._1(onDownload, /* () */0);\n                        })\n                    }, \"Download as json\")));\n}\n\nvar SceneForm = /* module */[/* make */ScenePicker$SceneForm];\n\nfunction ScenePicker(Props) {\n  var directory = Props.directory;\n  var current = Props.current;\n  var onSelect = Props.onSelect;\n  var hover = Props.hover;\n  var unHover = Props.unHover;\n  return React.createElement(\"div\", {\n              className: Css.style(/* :: */[\n                    Css.flex(1),\n                    /* :: */[\n                      Css.display(/* flex */-1010954439),\n                      /* :: */[\n                        Css.flexDirection(/* column */-963948842),\n                        /* [] */0\n                      ]\n                    ]\n                  ])\n            }, React.createElement(\"div\", {\n                  className: Styles.row + (\" \" + Css.style(/* :: */[\n                          Css.padding(Css.px(8)),\n                          /* [] */0\n                        ]))\n                }, React.createElement(\"div\", {\n                      className: Styles.titleNoMargin\n                    }, \"Saved scenes\"), Styles.spacer(8), React.createElement(\"button\", {\n                      className: Styles.flatButton(Css.white)\n                    }, \"Organize scenes\")), React.createElement(\"div\", {\n                  className: Css.style(/* :: */[\n                        Css.flex(1),\n                        /* :: */[\n                          Css.display(/* flex */-1010954439),\n                          /* :: */[\n                            Css.flexDirection(/* row */5693978),\n                            /* :: */[\n                              Css.maxHeight(Css.px(300)),\n                              /* :: */[\n                                Css.maxWidth(Css.px(1024)),\n                                /* :: */[\n                                  Css.overflow(/* auto */-1065951377),\n                                  /* :: */[\n                                    Css.flexWrap(/* wrap */-822134326),\n                                    /* [] */0\n                                  ]\n                                ]\n                              ]\n                            ]\n                          ]\n                        ]\n                      ])\n                }, Belt_List.toArray(Belt_List.map(Belt_List.sort(Belt_List.fromArray(Belt_MapString.toArray(directory[/* scenes */0])), (function (param, param$1) {\n                                return Caml_primitive.caml_string_compare(param$1[0], param[0]);\n                              })), (function (param) {\n                            var key = param[0];\n                            return React.createElement(ScenePicker$Scene, {\n                                        scene: param[1],\n                                        selected: Caml_obj.caml_equal(current, key),\n                                        onSelect: onSelect,\n                                        hover: hover,\n                                        unHover: unHover,\n                                        key: key\n                                      });\n                          })))));\n}\n\nvar make = ScenePicker;\n\nexports.sceneFromKey = sceneFromKey;\nexports.getSceneInfo = getSceneInfo;\nexports.saveSceneInfo = saveSceneInfo;\nexports.Scene = Scene;\nexports.SceneForm = SceneForm;\nexports.make = make;\n/* Css Not a pure module */\n\n\n//# sourceURL=webpack:///./ui/ScenePicker.bs.js?");

/***/ }),

/***/ "./ui/Styles.bs.js":
/*!*************************!*\
  !*** ./ui/Styles.bs.js ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Generated by BUCKLESCRIPT VERSION 5.0.4, PLEASE EDIT WITH CARE\n\n\nvar Css = __webpack_require__(/*! bs-css/src/Css.js */ \"./node_modules/bs-css/src/Css.js\");\nvar React = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\nvar Colors = __webpack_require__(/*! ./Colors.bs.js */ \"./ui/Colors.bs.js\");\nvar $$String = __webpack_require__(/*! bs-platform/lib/js/string.js */ \"./node_modules/bs-platform/lib/js/string.js\");\n\nvar title = Css.style(/* :: */[\n      Css.fontSize(Css.px(12)),\n      /* :: */[\n        Css.fontWeight(/* `num */[\n              5496390,\n              600\n            ]),\n        /* :: */[\n          Css.color(Colors.accent),\n          /* :: */[\n            Css.marginBottom(Css.px(8)),\n            /* [] */0\n          ]\n        ]\n      ]\n    ]);\n\nvar titleNoMargin = Css.style(/* :: */[\n      Css.fontSize(Css.px(12)),\n      /* :: */[\n        Css.fontWeight(/* `num */[\n              5496390,\n              600\n            ]),\n        /* :: */[\n          Css.color(Colors.accent),\n          /* [] */0\n        ]\n      ]\n    ]);\n\nfunction join(styles) {\n  return $$String.concat(\" \", styles);\n}\n\nvar control = Css.style(/* :: */[\n      Css.borderRadius(Css.px(4)),\n      /* :: */[\n        Css.boxShadow(undefined, undefined, Css.px(5), Css.px(2), undefined, Colors.accent),\n        /* :: */[\n          Css.backgroundColor(Colors.control),\n          /* :: */[\n            Css.padding2(Css.px(6), Css.px(8)),\n            /* :: */[\n              Css.marginBottom(Css.px(8)),\n              /* [] */0\n            ]\n          ]\n        ]\n      ]\n    ]);\n\nvar column = Css.style(/* :: */[\n      Css.display(/* flex */-1010954439),\n      /* :: */[\n        Css.flexDirection(/* column */-963948842),\n        /* [] */0\n      ]\n    ]);\n\nvar controlColumn = $$String.concat(\" \", /* :: */[\n      control,\n      /* :: */[\n        column,\n        /* [] */0\n      ]\n    ]);\n\nfunction spacer(v) {\n  return React.createElement(\"div\", {\n              style: {\n                flexBasis: String(v) + \"px\"\n              }\n            });\n}\n\nvar row = Css.style(/* :: */[\n      Css.display(/* flex */-1010954439),\n      /* :: */[\n        Css.flexDirection(/* row */5693978),\n        /* :: */[\n          Css.alignItems(/* center */98248149),\n          /* [] */0\n        ]\n      ]\n    ]);\n\nfunction flatButton(textColor) {\n  return Css.style(/* :: */[\n              Css.backgroundColor(/* transparent */582626130),\n              /* :: */[\n                Css.color(textColor),\n                /* [] */0\n              ]\n            ]);\n}\n\nexports.title = title;\nexports.titleNoMargin = titleNoMargin;\nexports.join = join;\nexports.control = control;\nexports.column = column;\nexports.controlColumn = controlColumn;\nexports.spacer = spacer;\nexports.row = row;\nexports.flatButton = flatButton;\n/* title Not a pure module */\n\n\n//# sourceURL=webpack:///./ui/Styles.bs.js?");

/***/ }),

/***/ "./ui/TypeHelpers.bs.js":
/*!******************************!*\
  !*** ./ui/TypeHelpers.bs.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Generated by BUCKLESCRIPT VERSION 5.0.4, PLEASE EDIT WITH CARE\n\n\nvar Block = __webpack_require__(/*! bs-platform/lib/js/block.js */ \"./node_modules/bs-platform/lib/js/block.js\");\nvar Curry = __webpack_require__(/*! bs-platform/lib/js/curry.js */ \"./node_modules/bs-platform/lib/js/curry.js\");\nvar Js_dict = __webpack_require__(/*! bs-platform/lib/js/js_dict.js */ \"./node_modules/bs-platform/lib/js/js_dict.js\");\nvar Js_json = __webpack_require__(/*! bs-platform/lib/js/js_json.js */ \"./node_modules/bs-platform/lib/js/js_json.js\");\nvar Belt_Array = __webpack_require__(/*! bs-platform/lib/js/belt_Array.js */ \"./node_modules/bs-platform/lib/js/belt_Array.js\");\nvar Belt_MapString = __webpack_require__(/*! bs-platform/lib/js/belt_MapString.js */ \"./node_modules/bs-platform/lib/js/belt_MapString.js\");\nvar Belt_SetString = __webpack_require__(/*! bs-platform/lib/js/belt_SetString.js */ \"./node_modules/bs-platform/lib/js/belt_SetString.js\");\n\nfunction deserialize_Belt_SetString____t(json) {\n  var match = Js_json.classify(json);\n  if (typeof match === \"number\" || match.tag !== 3) {\n    return /* Error */Block.__(1, [/* :: */[\n                \"Expected an array\",\n                /* [] */0\n              ]]);\n  } else {\n    return Belt_Array.reduce(match[0], /* Ok */Block.__(0, [Belt_SetString.empty]), (function (set, item) {\n                  var match = Js_json.classify(item);\n                  if (set.tag) {\n                    return /* Error */Block.__(1, [set[0]]);\n                  } else if (typeof match === \"number\" || match.tag) {\n                    return /* Error */Block.__(1, [/* :: */[\n                                \"Expected a string in the set array\",\n                                /* [] */0\n                              ]]);\n                  } else {\n                    return /* Ok */Block.__(0, [Belt_SetString.add(set[0], match[0])]);\n                  }\n                }));\n  }\n}\n\nvar serialize_Belt_SetString____t = Belt_SetString.toArray;\n\nfunction deserialize_Belt_MapString____t(converter, json) {\n  var match = Js_json.classify(json);\n  if (typeof match === \"number\" || match.tag !== 2) {\n    return /* Error */Block.__(1, [/* :: */[\n                \"Expected an object\",\n                /* [] */0\n              ]]);\n  } else {\n    return Belt_Array.reduce(Js_dict.entries(match[0]), /* Ok */Block.__(0, [Belt_MapString.empty]), (function (map, param) {\n                  if (map.tag) {\n                    return map;\n                  } else {\n                    var match = Curry._1(converter, param[1]);\n                    if (match.tag) {\n                      return /* Error */Block.__(1, [match[0]]);\n                    } else {\n                      return /* Ok */Block.__(0, [Belt_MapString.set(map[0], param[0], match[0])]);\n                    }\n                  }\n                }));\n  }\n}\n\nfunction serialize_Belt_MapString____t(converter, map) {\n  return Js_dict.fromArray(Belt_Array.map(Belt_MapString.toArray(map), (function (param) {\n                    return /* tuple */[\n                            param[0],\n                            Curry._1(converter, param[1])\n                          ];\n                  })));\n}\n\nexports.deserialize_Belt_SetString____t = deserialize_Belt_SetString____t;\nexports.serialize_Belt_SetString____t = serialize_Belt_SetString____t;\nexports.deserialize_Belt_MapString____t = deserialize_Belt_MapString____t;\nexports.serialize_Belt_MapString____t = serialize_Belt_MapString____t;\n/* No side effect */\n\n\n//# sourceURL=webpack:///./ui/TypeHelpers.bs.js?");

/***/ }),

/***/ "./ui/TypeSerde.bs.js":
/*!****************************!*\
  !*** ./ui/TypeSerde.bs.js ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Generated by BUCKLESCRIPT VERSION 5.0.4, PLEASE EDIT WITH CARE\n\n\nvar Block = __webpack_require__(/*! bs-platform/lib/js/block.js */ \"./node_modules/bs-platform/lib/js/block.js\");\nvar Curry = __webpack_require__(/*! bs-platform/lib/js/curry.js */ \"./node_modules/bs-platform/lib/js/curry.js\");\nvar Js_dict = __webpack_require__(/*! bs-platform/lib/js/js_dict.js */ \"./node_modules/bs-platform/lib/js/js_dict.js\");\nvar Js_json = __webpack_require__(/*! bs-platform/lib/js/js_json.js */ \"./node_modules/bs-platform/lib/js/js_json.js\");\nvar Belt_List = __webpack_require__(/*! bs-platform/lib/js/belt_List.js */ \"./node_modules/bs-platform/lib/js/belt_List.js\");\nvar Belt_Array = __webpack_require__(/*! bs-platform/lib/js/belt_Array.js */ \"./node_modules/bs-platform/lib/js/belt_Array.js\");\nvar Caml_option = __webpack_require__(/*! bs-platform/lib/js/caml_option.js */ \"./node_modules/bs-platform/lib/js/caml_option.js\");\nvar TypeHelpers = __webpack_require__(/*! ./TypeHelpers.bs.js */ \"./ui/TypeHelpers.bs.js\");\n\nvar Types1 = /* module */[];\n\nvar schemaPropertyName = \"$schemaVersion\";\n\nvar deserialize_Belt_SetString____t = TypeHelpers.deserialize_Belt_SetString____t;\n\nvar serialize_Belt_SetString____t = TypeHelpers.serialize_Belt_SetString____t;\n\nfunction deserialize_Belt_MapString____t(valueTransformer) {\n  return (function (param) {\n      return TypeHelpers.deserialize_Belt_MapString____t(valueTransformer, param);\n    });\n}\n\nfunction deserialize_Types____tag(record) {\n  var match = Js_json.classify(record);\n  if (typeof match === \"number\" || match.tag !== 2) {\n    return /* Error */Block.__(1, [/* :: */[\n                \"Expected an object\",\n                /* [] */0\n              ]]);\n  } else {\n    var dict = match[0];\n    var match$1 = Js_dict.get(dict, \"title\");\n    if (match$1 !== undefined) {\n      var match$2 = Js_json.classify(Caml_option.valFromOption(match$1));\n      var match$3;\n      match$3 = typeof match$2 === \"number\" || match$2.tag ? /* Error */Block.__(1, [/* :: */[\n              \"expected a string\",\n              /* [] */0\n            ]]) : /* Ok */Block.__(0, [match$2[0]]);\n      if (match$3.tag) {\n        return /* Error */Block.__(1, [/* :: */[\n                    \"attribute 'title'\",\n                    match$3[0]\n                  ]]);\n      } else {\n        var attr_title = match$3[0];\n        var match$4 = Js_dict.get(dict, \"color\");\n        if (match$4 !== undefined) {\n          var match$5 = Js_json.classify(Caml_option.valFromOption(match$4));\n          var match$6;\n          match$6 = typeof match$5 === \"number\" || match$5.tag ? /* Error */Block.__(1, [/* :: */[\n                  \"expected a string\",\n                  /* [] */0\n                ]]) : /* Ok */Block.__(0, [match$5[0]]);\n          if (match$6.tag) {\n            return /* Error */Block.__(1, [/* :: */[\n                        \"attribute 'color'\",\n                        match$6[0]\n                      ]]);\n          } else {\n            var attr_color = match$6[0];\n            var match$7 = Js_dict.get(dict, \"id\");\n            if (match$7 !== undefined) {\n              var match$8 = Js_json.classify(Caml_option.valFromOption(match$7));\n              var match$9;\n              match$9 = typeof match$8 === \"number\" || match$8.tag ? /* Error */Block.__(1, [/* :: */[\n                      \"expected a string\",\n                      /* [] */0\n                    ]]) : /* Ok */Block.__(0, [match$8[0]]);\n              if (match$9.tag) {\n                return /* Error */Block.__(1, [/* :: */[\n                            \"attribute 'id'\",\n                            match$9[0]\n                          ]]);\n              } else {\n                var attr_id = match$9[0];\n                return /* Ok */Block.__(0, [/* record */[\n                            /* id */attr_id,\n                            /* color */attr_color,\n                            /* title */attr_title\n                          ]]);\n              }\n            } else {\n              return /* Error */Block.__(1, [/* :: */[\n                          \"No attribute 'id'\",\n                          /* [] */0\n                        ]]);\n            }\n          }\n        } else {\n          return /* Error */Block.__(1, [/* :: */[\n                      \"No attribute 'color'\",\n                      /* [] */0\n                    ]]);\n        }\n      }\n    } else {\n      return /* Error */Block.__(1, [/* :: */[\n                  \"No attribute 'title'\",\n                  /* [] */0\n                ]]);\n    }\n  }\n}\n\nfunction deserialize_Types____scene(record) {\n  var match = Js_json.classify(record);\n  if (typeof match === \"number\" || match.tag !== 2) {\n    return /* Error */Block.__(1, [/* :: */[\n                \"Expected an object\",\n                /* [] */0\n              ]]);\n  } else {\n    var dict = match[0];\n    var inner = function (attr_parent) {\n      var match = Js_dict.get(dict, \"children\");\n      if (match !== undefined) {\n        var transformer = function (string) {\n          var match = Js_json.classify(string);\n          if (typeof match === \"number\" || match.tag) {\n            return /* Error */Block.__(1, [/* :: */[\n                        \"expected a string\",\n                        /* [] */0\n                      ]]);\n          } else {\n            return /* Ok */Block.__(0, [match[0]]);\n          }\n        };\n        var match$1 = Js_json.classify(Caml_option.valFromOption(match));\n        var match$2;\n        if (typeof match$1 === \"number\" || match$1.tag !== 3) {\n          match$2 = /* Error */Block.__(1, [/* :: */[\n                \"expected an array\",\n                /* [] */0\n              ]]);\n        } else {\n          var loop = function (_i, _collected, _items) {\n            while(true) {\n              var items = _items;\n              var collected = _collected;\n              var i = _i;\n              if (items) {\n                var match = transformer(items[0]);\n                if (match.tag) {\n                  return /* Error */Block.__(1, [/* :: */[\n                              \"list element \" + String(i),\n                              match[0]\n                            ]]);\n                } else {\n                  _items = items[1];\n                  _collected = /* :: */[\n                    match[0],\n                    collected\n                  ];\n                  _i = i + 1 | 0;\n                  continue ;\n                }\n              } else {\n                return /* Ok */Block.__(0, [Belt_List.reverse(collected)]);\n              }\n            };\n          };\n          var match$3 = loop(0, /* [] */0, Belt_List.fromArray(match$1[0]));\n          match$2 = match$3.tag ? /* Error */Block.__(1, [match$3[0]]) : /* Ok */Block.__(0, [Belt_List.toArray(match$3[0])]);\n        }\n        if (match$2.tag) {\n          return /* Error */Block.__(1, [/* :: */[\n                      \"attribute 'children'\",\n                      match$2[0]\n                    ]]);\n        } else {\n          var attr_children = match$2[0];\n          var match$4 = Js_dict.get(dict, \"tags\");\n          if (match$4 !== undefined) {\n            var match$5 = Curry._1(deserialize_Belt_SetString____t, Caml_option.valFromOption(match$4));\n            if (match$5.tag) {\n              return /* Error */Block.__(1, [/* :: */[\n                          \"attribute 'tags'\",\n                          match$5[0]\n                        ]]);\n            } else {\n              var attr_tags = match$5[0];\n              var inner$1 = function (attr_title) {\n                var match = Js_dict.get(dict, \"created\");\n                if (match !== undefined) {\n                  var match$1 = Js_json.classify(Caml_option.valFromOption(match));\n                  var match$2;\n                  match$2 = typeof match$1 === \"number\" || match$1.tag !== 1 ? /* Error */Block.__(1, [/* :: */[\n                          \"Expected a float\",\n                          /* [] */0\n                        ]]) : /* Ok */Block.__(0, [match$1[0]]);\n                  if (match$2.tag) {\n                    return /* Error */Block.__(1, [/* :: */[\n                                \"attribute 'created'\",\n                                match$2[0]\n                              ]]);\n                  } else {\n                    var attr_created = match$2[0];\n                    var match$3 = Js_dict.get(dict, \"modified\");\n                    if (match$3 !== undefined) {\n                      var match$4 = Js_json.classify(Caml_option.valFromOption(match$3));\n                      var match$5;\n                      match$5 = typeof match$4 === \"number\" || match$4.tag !== 1 ? /* Error */Block.__(1, [/* :: */[\n                              \"Expected a float\",\n                              /* [] */0\n                            ]]) : /* Ok */Block.__(0, [match$4[0]]);\n                      if (match$5.tag) {\n                        return /* Error */Block.__(1, [/* :: */[\n                                    \"attribute 'modified'\",\n                                    match$5[0]\n                                  ]]);\n                      } else {\n                        var attr_modified = match$5[0];\n                        var match$6 = Js_dict.get(dict, \"id\");\n                        if (match$6 !== undefined) {\n                          var match$7 = Js_json.classify(Caml_option.valFromOption(match$6));\n                          var match$8;\n                          match$8 = typeof match$7 === \"number\" || match$7.tag ? /* Error */Block.__(1, [/* :: */[\n                                  \"expected a string\",\n                                  /* [] */0\n                                ]]) : /* Ok */Block.__(0, [match$7[0]]);\n                          if (match$8.tag) {\n                            return /* Error */Block.__(1, [/* :: */[\n                                        \"attribute 'id'\",\n                                        match$8[0]\n                                      ]]);\n                          } else {\n                            var attr_id = match$8[0];\n                            return /* Ok */Block.__(0, [/* record */[\n                                        /* id */attr_id,\n                                        /* modified */attr_modified,\n                                        /* created */attr_created,\n                                        /* title */attr_title,\n                                        /* tags */attr_tags,\n                                        /* children */attr_children,\n                                        /* parent */attr_parent\n                                      ]]);\n                          }\n                        } else {\n                          return /* Error */Block.__(1, [/* :: */[\n                                      \"No attribute 'id'\",\n                                      /* [] */0\n                                    ]]);\n                        }\n                      }\n                    } else {\n                      return /* Error */Block.__(1, [/* :: */[\n                                  \"No attribute 'modified'\",\n                                  /* [] */0\n                                ]]);\n                    }\n                  }\n                } else {\n                  return /* Error */Block.__(1, [/* :: */[\n                              \"No attribute 'created'\",\n                              /* [] */0\n                            ]]);\n                }\n              };\n              var match$6 = Js_dict.get(dict, \"title\");\n              if (match$6 !== undefined) {\n                var json = Caml_option.valFromOption(match$6);\n                var transformer$1 = function (string) {\n                  var match = Js_json.classify(string);\n                  if (typeof match === \"number\" || match.tag) {\n                    return /* Error */Block.__(1, [/* :: */[\n                                \"expected a string\",\n                                /* [] */0\n                              ]]);\n                  } else {\n                    return /* Ok */Block.__(0, [match[0]]);\n                  }\n                };\n                var match$7 = Js_json.classify(json);\n                var match$8;\n                var exit = 0;\n                if (typeof match$7 === \"number\" && match$7 >= 2) {\n                  match$8 = /* Ok */Block.__(0, [undefined]);\n                } else {\n                  exit = 1;\n                }\n                if (exit === 1) {\n                  var match$9 = transformer$1(json);\n                  match$8 = match$9.tag ? /* Error */Block.__(1, [/* :: */[\n                          \"optional value\",\n                          match$9[0]\n                        ]]) : /* Ok */Block.__(0, [match$9[0]]);\n                }\n                if (match$8.tag) {\n                  return /* Error */Block.__(1, [/* :: */[\n                              \"attribute 'title'\",\n                              match$8[0]\n                            ]]);\n                } else {\n                  return inner$1(match$8[0]);\n                }\n              } else {\n                return inner$1(undefined);\n              }\n            }\n          } else {\n            return /* Error */Block.__(1, [/* :: */[\n                        \"No attribute 'tags'\",\n                        /* [] */0\n                      ]]);\n          }\n        }\n      } else {\n        return /* Error */Block.__(1, [/* :: */[\n                    \"No attribute 'children'\",\n                    /* [] */0\n                  ]]);\n      }\n    };\n    var match$1 = Js_dict.get(dict, \"parent\");\n    if (match$1 !== undefined) {\n      var json = Caml_option.valFromOption(match$1);\n      var transformer = function (string) {\n        var match = Js_json.classify(string);\n        if (typeof match === \"number\" || match.tag) {\n          return /* Error */Block.__(1, [/* :: */[\n                      \"expected a string\",\n                      /* [] */0\n                    ]]);\n        } else {\n          return /* Ok */Block.__(0, [match[0]]);\n        }\n      };\n      var match$2 = Js_json.classify(json);\n      var match$3;\n      var exit = 0;\n      if (typeof match$2 === \"number\" && match$2 >= 2) {\n        match$3 = /* Ok */Block.__(0, [undefined]);\n      } else {\n        exit = 1;\n      }\n      if (exit === 1) {\n        var match$4 = transformer(json);\n        match$3 = match$4.tag ? /* Error */Block.__(1, [/* :: */[\n                \"optional value\",\n                match$4[0]\n              ]]) : /* Ok */Block.__(0, [match$4[0]]);\n      }\n      if (match$3.tag) {\n        return /* Error */Block.__(1, [/* :: */[\n                    \"attribute 'parent'\",\n                    match$3[0]\n                  ]]);\n      } else {\n        return inner(match$3[0]);\n      }\n    } else {\n      return inner(undefined);\n    }\n  }\n}\n\nfunction serialize_Types____tag(record) {\n  return Js_dict.fromArray(/* array */[\n              /* tuple */[\n                \"id\",\n                record[/* id */0]\n              ],\n              /* tuple */[\n                \"color\",\n                record[/* color */1]\n              ],\n              /* tuple */[\n                \"title\",\n                record[/* title */2]\n              ]\n            ]);\n}\n\nfunction serialize_Belt_MapString____t(valueTransformer) {\n  return (function (param) {\n      return TypeHelpers.serialize_Belt_MapString____t(valueTransformer, param);\n    });\n}\n\nfunction serialize_Types____scene(record) {\n  var param = record[/* title */3];\n  var array = record[/* children */5];\n  var transformer = function (prim) {\n    return prim;\n  };\n  var param$1 = record[/* parent */6];\n  return Js_dict.fromArray(/* array */[\n              /* tuple */[\n                \"id\",\n                record[/* id */0]\n              ],\n              /* tuple */[\n                \"modified\",\n                record[/* modified */1]\n              ],\n              /* tuple */[\n                \"created\",\n                record[/* created */2]\n              ],\n              /* tuple */[\n                \"title\",\n                param !== undefined ? param : null\n              ],\n              /* tuple */[\n                \"tags\",\n                Curry._1(serialize_Belt_SetString____t, record[/* tags */4])\n              ],\n              /* tuple */[\n                \"children\",\n                Belt_Array.map(array, transformer)\n              ],\n              /* tuple */[\n                \"parent\",\n                param$1 !== undefined ? param$1 : null\n              ]\n            ]);\n}\n\nfunction deserialize_Types____directory(record) {\n  var match = Js_json.classify(record);\n  if (typeof match === \"number\" || match.tag !== 2) {\n    return /* Error */Block.__(1, [/* :: */[\n                \"Expected an object\",\n                /* [] */0\n              ]]);\n  } else {\n    var dict = match[0];\n    var match$1 = Js_dict.get(dict, \"tags\");\n    if (match$1 !== undefined) {\n      var match$2 = TypeHelpers.deserialize_Belt_MapString____t(deserialize_Types____tag, Caml_option.valFromOption(match$1));\n      if (match$2.tag) {\n        return /* Error */Block.__(1, [/* :: */[\n                    \"attribute 'tags'\",\n                    match$2[0]\n                  ]]);\n      } else {\n        var attr_tags = match$2[0];\n        var match$3 = Js_dict.get(dict, \"scenes\");\n        if (match$3 !== undefined) {\n          var match$4 = TypeHelpers.deserialize_Belt_MapString____t(deserialize_Types____scene, Caml_option.valFromOption(match$3));\n          if (match$4.tag) {\n            return /* Error */Block.__(1, [/* :: */[\n                        \"attribute 'scenes'\",\n                        match$4[0]\n                      ]]);\n          } else {\n            return /* Ok */Block.__(0, [/* record */[\n                        /* scenes */match$4[0],\n                        /* tags */attr_tags\n                      ]]);\n          }\n        } else {\n          return /* Error */Block.__(1, [/* :: */[\n                      \"No attribute 'scenes'\",\n                      /* [] */0\n                    ]]);\n        }\n      }\n    } else {\n      return /* Error */Block.__(1, [/* :: */[\n                  \"No attribute 'tags'\",\n                  /* [] */0\n                ]]);\n    }\n  }\n}\n\nfunction serialize_Types____directory(record) {\n  var param = record[/* scenes */0];\n  var param$1 = record[/* tags */1];\n  return Js_dict.fromArray(/* array */[\n              /* tuple */[\n                \"scenes\",\n                TypeHelpers.serialize_Belt_MapString____t(serialize_Types____scene, param)\n              ],\n              /* tuple */[\n                \"tags\",\n                TypeHelpers.serialize_Belt_MapString____t(serialize_Types____tag, param$1)\n              ]\n            ]);\n}\n\nvar Version1 = /* module */[\n  /* deserialize_Belt_MapString____t */deserialize_Belt_MapString____t,\n  /* deserialize_Belt_SetString____t */deserialize_Belt_SetString____t,\n  /* deserialize_Types____directory */deserialize_Types____directory,\n  /* deserialize_Types____scene */deserialize_Types____scene,\n  /* deserialize_Types____tag */deserialize_Types____tag,\n  /* serialize_Belt_MapString____t */serialize_Belt_MapString____t,\n  /* serialize_Belt_SetString____t */serialize_Belt_SetString____t,\n  /* serialize_Types____directory */serialize_Types____directory,\n  /* serialize_Types____scene */serialize_Types____scene,\n  /* serialize_Types____tag */serialize_Types____tag\n];\n\nfunction parseVersion(json) {\n  var match = Js_json.classify(json);\n  if (typeof match === \"number\") {\n    return /* Error */Block.__(1, [\"Must have a schema version\"]);\n  } else {\n    switch (match.tag | 0) {\n      case 2 : \n          var match$1 = Js_dict.get(match[0], schemaPropertyName);\n          if (match$1 !== undefined) {\n            var match$2 = Js_json.classify(Caml_option.valFromOption(match$1));\n            if (typeof match$2 === \"number\" || match$2.tag !== 1) {\n              return /* Error */Block.__(1, [\"Invalid $schemaVersion\"]);\n            } else {\n              return /* Ok */Block.__(0, [/* tuple */[\n                          match$2[0] | 0,\n                          json\n                        ]]);\n            }\n          } else {\n            return /* Error */Block.__(1, [\"No $schemaVersion present\"]);\n          }\n      case 3 : \n          var match$3 = match[0];\n          if (match$3.length !== 2) {\n            return /* Error */Block.__(1, [\"Must have a schema version\"]);\n          } else {\n            var version = match$3[0];\n            var payload = match$3[1];\n            var match$4 = Js_json.classify(version);\n            if (typeof match$4 === \"number\" || match$4.tag !== 1) {\n              return /* Error */Block.__(1, [\"Invalid wrapped version\"]);\n            } else {\n              return /* Ok */Block.__(0, [/* tuple */[\n                          match$4[0] | 0,\n                          payload\n                        ]]);\n            }\n          }\n      default:\n        return /* Error */Block.__(1, [\"Must have a schema version\"]);\n    }\n  }\n}\n\nfunction wrapWithVersion(version, payload) {\n  var match = Js_json.classify(payload);\n  if (typeof match === \"number\") {\n    return /* array */[\n            version,\n            payload\n          ];\n  } else if (match.tag === 2) {\n    var dict = match[0];\n    dict[schemaPropertyName] = version;\n    return dict;\n  } else {\n    return /* array */[\n            version,\n            payload\n          ];\n  }\n}\n\nfunction serializeDirectory(data) {\n  return wrapWithVersion(1, serialize_Types____directory(data));\n}\n\nfunction deserializeDirectory(data) {\n  var match = parseVersion(data);\n  if (match.tag) {\n    return /* Error */Block.__(1, [/* :: */[\n                match[0],\n                /* [] */0\n              ]]);\n  } else {\n    var match$1 = match[0];\n    var version = match$1[0];\n    if (version !== 1) {\n      return /* Error */Block.__(1, [/* :: */[\n                  \"Unexpected version \" + String(version),\n                  /* [] */0\n                ]]);\n    } else {\n      var match$2 = deserialize_Types____directory(match$1[1]);\n      if (match$2.tag) {\n        return /* Error */Block.__(1, [match$2[0]]);\n      } else {\n        return /* Ok */Block.__(0, [match$2[0]]);\n      }\n    }\n  }\n}\n\nvar Directory = /* module */[\n  /* serialize */serializeDirectory,\n  /* deserialize */deserializeDirectory\n];\n\nvar Modules = /* module */[/* Directory */Directory];\n\nvar currentVersion = 1;\n\nvar Current = 0;\n\nexports.Types1 = Types1;\nexports.currentVersion = currentVersion;\nexports.schemaPropertyName = schemaPropertyName;\nexports.Version1 = Version1;\nexports.Current = Current;\nexports.parseVersion = parseVersion;\nexports.wrapWithVersion = wrapWithVersion;\nexports.serializeDirectory = serializeDirectory;\nexports.deserializeDirectory = deserializeDirectory;\nexports.Modules = Modules;\n/* No side effect */\n\n\n//# sourceURL=webpack:///./ui/TypeSerde.bs.js?");

/***/ }),

/***/ "./ui/Types.bs.js":
/*!************************!*\
  !*** ./ui/Types.bs.js ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Generated by BUCKLESCRIPT VERSION 5.0.4, PLEASE EDIT WITH CARE\n\n\nvar Belt_SetString = __webpack_require__(/*! bs-platform/lib/js/belt_SetString.js */ \"./node_modules/bs-platform/lib/js/belt_SetString.js\");\n\nvar emptyScene_005 = /* children : array */[];\n\nvar emptyScene = /* record */[\n  /* id */\"\",\n  /* modified */0,\n  /* created */0,\n  /* title */undefined,\n  /* tags */Belt_SetString.empty,\n  emptyScene_005,\n  /* parent */undefined\n];\n\nexports.emptyScene = emptyScene;\n/* No side effect */\n\n\n//# sourceURL=webpack:///./ui/Types.bs.js?");

/***/ }),

/***/ "./ui/Web.bs.js":
/*!**********************!*\
  !*** ./ui/Web.bs.js ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Generated by BUCKLESCRIPT VERSION 5.0.4, PLEASE EDIT WITH CARE\n\n\nvar Curry = __webpack_require__(/*! bs-platform/lib/js/curry.js */ \"./node_modules/bs-platform/lib/js/curry.js\");\n\nvar LocalForage = /* module */[];\n\nfunction hash(param) {\n  return location.hash;\n}\n\nfunction setHash(hash) {\n  location.hash = hash;\n  return /* () */0;\n}\n\nfunction addHashListener(fn) {\n  var listener = function (param) {\n    return Curry._1(fn, location.hash);\n  };\n  window.addEventListener(\"hashchange\", listener, false);\n  return (function (param) {\n      window.removeEventListener(\"hashchange\", listener, false);\n      return /* () */0;\n    });\n}\n\nvar $$Location = /* module */[\n  /* hash */hash,\n  /* setHash */setHash,\n  /* addHashListener */addHashListener\n];\n\nexports.LocalForage = LocalForage;\nexports.$$Location = $$Location;\n/* No side effect */\n\n\n//# sourceURL=webpack:///./ui/Web.bs.js?");

/***/ })

}]);